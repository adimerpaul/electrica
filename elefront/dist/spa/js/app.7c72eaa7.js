(function(t){function e(e){for(var o,n,l=e[0],r=e[1],c=e[2],d=0,p=[];d<l.length;d++)n=l[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(o=!1)}o&&(s.splice(e--,1),t=l(l.s=a[0]))}return t}var o={},i={1:0},s=[];function n(t){return l.p+"js/"+({}[t]||t)+"."+{2:"b3056fe5",3:"35d58964",4:"0b751682"}[t]+".js"}function l(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=i[t]=[e,o]}));e.push(a[2]=o);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=n(t);var c=new Error;s=function(e){r.onerror=r.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,a[1](c)}i[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:r})}),12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(e)},l.m=t,l.c=o,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(a,o,function(e){return t[e]}.bind(null,o));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=c;s.push([0,0]),a()})({0:function(t,e,a){t.exports=a("2f39")},1:function(t,e){},2:function(t,e){},"2f39":function(t,e,a){"use strict";a.r(e);var o={};a.r(o),a.d(o,"isLoggedIn",(function(){return y})),a.d(o,"authStatus",(function(){return _})),a.d(o,"user",(function(){return k}));var i={};a.r(i),a.d(i,"auth_request",(function(){return w})),a.d(i,"auth_success",(function(){return O})),a.d(i,"auth_error",(function(){return A})),a.d(i,"salir",(function(){return D}));var s={};a.r(s),a.d(s,"login",(function(){return R})),a.d(s,"register",(function(){return $})),a.d(s,"logout",(function(){return S}));a("7d6e"),a("e54f"),a("985d"),a("31cd");var n=a("2b0e"),l=a("df1a"),r=a("42d2"),c=a("b05d"),d=a("f508"),u=a("2a19"),p=a("436b");n["a"].use(c["a"],{config:{},lang:l["a"],iconSet:r["a"],plugins:{Loading:d["a"],Notify:u["a"],Dialog:p["a"]}});var m=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"q-app"}},[e("router-view")],1)},h=[],b={name:"App"},g=b,f=a("2877"),v=Object(f["a"])(g,m,h,!1,null,null,null),q=v.exports,C=a("2f62"),x=function(){return{status:"",token:localStorage.getItem("tokenelec")||"",user:{},pedido:[],boolusuario:!1,booledituser:!1,boolpuntos:!1,boolgeneral:!1,boolmtto:!1,booldistrito:!1,booldenuncia:!1,boolreporte:!1,boolcronograma:!1,booltecnico:!1,booljunta:!1,boolgestionar:!1,boolreclamo:!1,boolalmacen:!1}};function y(t){return!!t.token}function _(t){return t.status}function k(t){return t.user}function w(t){t.status="loading"}function O(t,e){t.status="success",t.token=e.token,t.user=e.user,t.boolusuario=void 0!=e.user.permisos.find((t=>1===t.id)),t.booledituser=void 0!=e.user.permisos.find((t=>2===t.id)),t.boolpuntos=void 0!=e.user.permisos.find((t=>3===t.id)),t.boolgeneral=void 0!=e.user.permisos.find((t=>4===t.id)),t.boolmtto=void 0!=e.user.permisos.find((t=>5===t.id)),t.booldistrito=void 0!=e.user.permisos.find((t=>6===t.id)),t.booldenuncia=void 0!=e.user.permisos.find((t=>7===t.id)),t.boolreporte=void 0!=e.user.permisos.find((t=>8===t.id)),t.boolcronograma=void 0!=e.user.permisos.find((t=>9===t.id)),t.booltecnico=void 0!=e.user.permisos.find((t=>10===t.id)),t.booljunta=void 0!=e.user.permisos.find((t=>11===t.id)),t.boolgestionar=void 0!=e.user.permisos.find((t=>12===t.id)),t.boolreclamo=void 0!=e.user.permisos.find((t=>13===t.id)),t.boolalmacen=void 0!=e.user.permisos.find((t=>14===t.id))}function A(t){t.status="error"}function D(t){t.status="",t.token="",t.boolusuario=!1,t.booledituser=!1,t.boolpuntos=!1,t.boolgeneral=!1,t.boolmtto=!1,t.booldistrito=!1,t.booldenuncia=!1,t.boolreporte=!1,t.boolcronograma=!1,t.booltecnico=!1,t.booljunta=!1,t.boolgestionar=!1,t.boolreclamo=!1,t.boolalmacen=!1}var E=a("bc3a"),I=a.n(E);function R({commit:t},e){return new Promise(((a,o)=>{t("auth_request"),I.a.post("https://electricab.gamo.cf/api/login",e).then((e=>{const o=e.data.token,i=e.data.user;localStorage.setItem("tokenelec",o),I.a.defaults.headers.common["Authorization"]="Bearer "+o,t("auth_success",{token:o,user:i}),a(e)})).catch((e=>{t("auth_error"),localStorage.removeItem("tokenelec"),o(e)}))}))}function $({commit:t},e){return new Promise(((a,o)=>{t("auth_request"),I.a.post("https://electricab.gamo.cf/api/register",e).then((e=>{console.log(e.data);const o=e.data.token,i=e.data.user;localStorage.setItem("tokenelec",o),I.a.defaults.headers.common["Authorization"]="Bearer "+o,t("auth_success",{token:o,user:i}),a(e)})).catch((e=>{t("auth_error"),localStorage.removeItem("tokenelec"),o(e)}))}))}function S({commit:t}){return new Promise(((e,a)=>{I.a.post("https://electricab.gamo.cf/api/logout").then((a=>{t("salir"),localStorage.removeItem("tokenelec"),delete I.a.defaults.headers.common["Authorization"],e()})).catch((e=>{t("auth_error"),localStorage.removeItem("tokenelec"),a(e)}))}))}var T={namespaced:!0,state:x,getters:o,mutations:i,actions:s};n["a"].use(C["a"]);var N=function(){const t=new C["a"].Store({modules:{login:T},strict:!1});return t},M=a("8c4f"),L=function(){var t=this,e=t._self._c;return e("q-page",[e("div",{staticClass:"col-12"},[e("l-map",{staticStyle:{height:"50vh"},attrs:{zoom:t.zoom,center:t.center}},[e("l-tile-layer",{attrs:{url:t.styleMap?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap",attribution:t.attribution}}),t._l(t.puntos,(function(a){return e("l-marker",{key:a.id,attrs:{"lat-lng":[a.lat,a.lng]},on:{click:function(e){t.center=[a.lat,a.lng],t.punto=a,t.frmmodalpunto(a)}}},[e("l-icon",{attrs:{"icon-url":"http://maps.google.com/mapfiles/ms/icons/red-dot.png"}})],1)})),e("l-control",{attrs:{position:"topright"}},[e("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"map",dense:"",round:""},on:{click:function(e){t.styleMap=!t.styleMap}}})],1)],2)],1),e("q-table",{attrs:{data:t.puntos,columns:t.colums,filter:t.filter},scopedSlots:t._u([{key:"body-cell-ubicacion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"ACTIVO"==a.row.estado?"primary":"negative",icon:"place",size:"xs"},on:{click:function(e){return t.clickclientes(a.row)}}})],1)]}},{key:"top-right",fn:function(){return[e("q-btn",{attrs:{icon:"refresh",color:"info"},on:{click:t.mispuntos}}),e("q-btn",{attrs:{icon:"adjust",color:"negative"},on:{click:t.centro}}),e("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0}])}),e("q-dialog",{attrs:{"full-width":""},model:{value:t.modalpunto,callback:function(e){t.modalpunto=e},expression:"modalpunto"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Nro poste "+t._s(t.poste.nroposte)+" lat:"+t._s(t.poste.lat)+" lng:"+t._s(t.poste.lng))])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-form",{on:{submit:t.regmatto}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-9"},[e("b",[t._v("Reclamo: ")]),t._v(t._s(t.punto.reclamo)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Fecha Hora:")]),t._v(" "+t._s(t.punto.fecha)+" "+t._s(t.punto.hora)+"\n              ")])]),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Luminaria: ")]),t._v(" "+t._s(t.poste.luminaria)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Material: ")]),t._v(t._s(t.poste.material)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Altura: ")]),t._v(t._s(t.poste.altura)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Potencia: ")]),t._v(t._s(t.poste.potencia)+"\n              ")]),e("div",{staticClass:"col-md-12"},[e("b",[t._v("Observacion: ")]),t._v(t._s(t.poste.observacion)+"\n              ")])]),e("div",{staticClass:"col-12 flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{label:"Generar Ruta",color:"primary",icon:"map",type:"a",target:"_blank",href:"https://www.google.com.bo/maps/place/"+t.poste.lat+","+t.poste.lng+"/@"+t.poste.lat+","+t.poste.lng+",17z/data=!3m1!4b1!4m6!3m5!1s0x0:0xeda9371aeb8c1574!7e2!8m2!3d-17.981432!4d-67.1061122?hl=es"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{required:"",dense:"",outlined:"",type:"textarea",label:"Actividad"},model:{value:t.punto.actividad,callback:function(e){t.$set(t.punto,"actividad",e)},expression:"punto.actividad"}})],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-select",{attrs:{dense:"",options:t.listMaterial,label:"Materiales",outlined:""},on:{input:function(e){return t.buscar()}},model:{value:t.material,callback:function(e){t.material=e},expression:"material"}})],1),e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-select",{attrs:{dense:"",options:t.codigos,label:"Codigo",outlined:""},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Disponible:")]),t._v(t._s(t.codigo.saldo)+"\n                ")]),e("div",{staticClass:"col-md-2 col-xs-4"},[e("q-input",{attrs:{type:"number",label:"Cantidad",required:"",outlined:"",dense:""},model:{value:t.cantidad,callback:function(e){t.cantidad=e},expression:"cantidad"}})],1),e("div",{staticClass:"col-md-1 col-xs-2 q-pa-xs"},[e("q-btn",{attrs:{color:"green",icon:"add_circle",dense:""},on:{click:t.agregar}})],1),e("div",{staticClass:"col-12"},[e("q-table",{attrs:{title:"DETALLE",data:t.detalle,columns:t.coldetalle,"row-key":"name",dense:""},scopedSlots:t._u([{key:"body-cell-opcion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"red",icon:"delete",size:"xs",round:""},on:{click:function(e){return t.delDetalle(a.rowIndex)}}})],1)]}}])})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"date",label:"Fecha Man"},model:{value:t.punto.fechaman,callback:function(e){t.$set(t.punto,"fechaman",e)},expression:"punto.fechaman"}})],1),e("div",{staticClass:"col-md-6 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"time",label:"Hora Man"},model:{value:t.punto.horaman,callback:function(e){t.$set(t.punto,"horaman",e)},expression:"punto.horaman"}})],1),e("div",{staticClass:"col-12 flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{type:"submit",label:"Realizar mantenimiento",color:"positive",icon:"construction"}})],1)])])],1)],1)],1),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})],1)},Q=[],P=(a("14d9"),a("bd4c")),z=a("3748");a("4362");const U=a("d055");var F={data(){return{modalpunto:!1,styleMap:!0,detalle:[],material:{},codigo:{},codigos:[],fechaplan:P["a"].formatDate(new Date,"YYYY-MM-DD"),filter:"",url:"https://electrica.gamo.cf/#/consulta",poste:{},persona:{},qrImage2:"",cantidad:1,qrImage:"",colums:[{name:"nroposte",label:"nroposte",field:t=>t.poste.nroposte},{name:"potencia",label:"potencia",field:t=>t.poste.potencia},{name:"luminaria",label:"luminaria",field:t=>t.poste.luminaria},{name:"ubicacion",label:"ubicacion",field:t=>t.poste.ubicacion}],coldetalle:[{label:"OP",field:"opcion",name:"opcion"},{label:"MATERIAL",field:"material",name:"material"},{label:"CODIGO",field:t=>t.inventario.codigo,name:"codigo"},{label:"CANT",field:"uso",name:"uso"}],puntos:[],puntostabla:[],listMaterial:[],punto:{},attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:13,center:{lat:-17.97031,lng:-67.11178},markerLatLng:[-17.97031,-67.11178],opts:{errorCorrectionLevel:"M",type:"png",quality:.95,width:100,margin:1,color:{dark:"#000000",light:"#FFF"}},opts2:{errorCorrectionLevel:"M",type:"png",quality:.95,width:50,margin:1,color:{dark:"#000000",light:"#FFF"}}}},created(){this.mispuntos(),this.cargarMaterial()},methods:{regmatto(){this.$axios.post("reclamofin",{punto:this.punto,detalle:this.detalle}).then((t=>{console.log(t.data),this.modalpunto=!1,this.mispuntos(),this.cargarMaterial()}))},delDetalle(t){this.detalle.splice(t,1),this.llenarActividad},agregar(){if(void 0==this.cantidad||""==this.cantidad||this.cantidad<=0)return this.cantidad=1,!1;this.cantidad>this.codigo.saldo&&(this.cantidad=this.codigo.saldo),this.detalle.find((t=>t.id===this.codigo.id))||(this.codigo.uso=this.cantidad,this.detalle.push(this.codigo),this.llenarActividad())},llenarActividad(){let t="Cambio o instalacion materiales: ";0==this.detalle.length&&(t=""),this.detalle.forEach((e=>{t+=" "+e.material+" Cod: "+e.inventario.codigo+", "})),this.punto.actividad=t},buscar(){this.codigos=this.material.lista,this.codigo=this.material.lista[0],this.cantidad=1},cargarMaterial(){this.$axios.post("disponible").then((t=>{t.data.forEach((t=>{t.label=t.inventario.codigo;let e=this.listMaterial.find((e=>e.id===t.material_id));e?e.lista.push(t):this.listMaterial.push({id:t.material_id,label:t.material,lista:[t]})})),console.log(this.listMaterial),this.listMaterial.length>0?(this.material=this.listMaterial[0],this.codigo=this.material.lista[0],this.codigos=this.material.lista,this.cantidad=1):(this.material={label:""},this.codigo={label:""},this.cantidad=0)}))},async printReclamo(t){this.qrImage2=await U.toDataURL(""+t.persona.ci,this.opts2),this.qrImage=await U.toDataURL(this.url+"/"+t.persona.ci,this.opts);let e="<style>      .titulo{      font-size: 10px;      text-align: center;      font-weight: bold;      }      .titulo2{      font-size: 10px;      font-weight: bold;      text-align: center;      }            .titulo3{      font-size: 9px;      text-align: center;      width:70%;      }            .contenido{      font-size: 9px;      text-align: left;      }      .conte2{      font-size: 9px;      text-align: right;      }      .campotd{      text-align: center;      }      .titder{      font-size: 10px;      text-align: right;      font-weight: bold;      }      hr{  border-top: 1px dashed   ;}  table{    width:100%  }  h1 {    color: black;    font-family: sans-serif;  }</style>    <div id='myelement' style='background-image:url(logo3.png);background-repeat: no-repeat; background-size: 30px 60px;'>      <div class='titulo2' >        GOBIERNO AUTONOMO MUNICIPAL DE ORURO<br>        UNIDAD DE ALUMBRADO PUBLICO <br>Y SERVICIOS ELECTRICOS<br>        Reclamo Nro: "+t.id+"<br>        Oruro      </div>      <hr>      <table><tr><td>      <table>        <tr><td class='titder'>FECHA REGISTRO:</td><td class='contenido'>"+t.fecha+"</td></tr>        <tr><td class='titder'>CI:</td><td class='contenido'>"+t.persona.ci+"</td></tr>        <tr><td class='titder'>NOMBRE:</td><td class='contenido'>"+t.persona.nombre+"</td></tr>        <tr><td class='titder'>TELEFONO:</td><td class='contenido'>"+t.persona.telefono+"</td></tr>      </table></<td>       <td>        <div style='display: flex;justify-content: center;'>        <img src="+this.qrImage2+" >        </div>      </td></tr></table>      <hr>      <div class='titulo'>DETALLE RECLAMO</div>      <div  class='contenido'>"+t.reclamo+"</div>      <div style='display: flex;justify-content: center;'>  <img src="+this.qrImage+" >      </div>      </div>            ";document.getElementById("myelement").innerHTML=e;const a=new z["Printd"];a.print(document.getElementById("myelement"))},regActividad(){this.punto.actividad="",""!=this.punto.l70&&void 0!=this.punto.l70&&null!=this.punto.l70&&(this.punto.actividad+="LAMPARA 70W COD "+this.punto.l70+","),""!=this.punto.l150&&void 0!=this.punto.l150&&null!=this.punto.l150&&(this.punto.actividad+="LAMPARA 150W COD "+this.punto.l150+","),""!=this.punto.l250&&void 0!=this.punto.l250&&null!=this.punto.l250&&(this.punto.actividad+="LAMPARA 250W COD "+this.punto.l250+","),""!=this.punto.r70&&void 0!=this.punto.r70&&null!=this.punto.r70&&(this.punto.actividad+=" REACTOR 70W COD "+this.punto.r70+","),""!=this.punto.r150&&void 0!=this.punto.r150&&null!=this.punto.r150&&(this.punto.actividad+=" REACTOR 150W COD "+this.punto.r150+","),""!=this.punto.r250&&void 0!=this.punto.r250&&null!=this.punto.r250&&(this.punto.actividad+=" REACTOR 250W COD "+this.punto.r250+","),""!=this.punto.foto&&void 0!=this.punto.foto&&null!=this.punto.foto&&(this.punto.actividad+=" FOTOCELULA FOTO  "+this.punto.foto+","),""!=this.punto.base&&void 0!=this.punto.base&&null!=this.punto.base&&(this.punto.actividad+=" FOTOCELULA BASE  "+this.punto.base+","),""!=this.punto.ignitor&&void 0!=this.punto.ignitor&&null!=this.punto.ignitor&&(this.punto.actividad+=" IGNITOR COD "+this.punto.ignitor+","),""!=this.punto.cable&&void 0!=this.punto.cable&&null!=this.punto.cable&&(this.punto.actividad+=" CABLE M/L "+this.punto.cable+","),""!=this.punto.contactor&&void 0!=this.punto.contactor&&null!=this.punto.contactor&&"NO"!=this.punto.contactor&&(this.punto.actividad+=" SI CONTACTOR,"),""!=this.punto.termico&&void 0!=this.punto.termico&&null!=this.punto.termico&&"NO"!=this.punto.termico&&(this.punto.actividad+=" SI TERMICO,"),""!=this.punto.soquet&&void 0!=this.punto.soquet&&null!=this.punto.soquet&&(this.punto.actividad+=" soquet COD "+this.punto.soquet+",")},updatedenuncia(){this.$q.loading.show(),this.punto.supervisor=this.$store.state.login.user.name,this.punto.estado="ATENDIDO",void 0!=this.fechaplan&&""!=this.fechaplan&&(this.punto.fechaplan=this.fechaplan),this.modalpunto=!1,this.$axios.put("reclamo/"+this.punto.id,this.punto).then((t=>{console.log(t.data),this.mispuntos(),this.fechaplan=P["a"].formatDate(new Date,"YYYY-MM-DD")}))},frmmodalpunto(t){console.log(t),this.modalpunto=!0,this.punto=t,this.detalle=[],this.persona=t.persona,this.poste=t.poste},clickclientes(t){this.center={lat:t.lat,lng:t.lng},this.zoom=18},centro(){this.center=[-17.97031,-67.11178],this.zoom=13},mispuntos(){this.$q.loading.show(),this.$axios.get("listmtto").then((t=>{console.log(t.data),this.puntos=[],t.data.forEach((t=>{null==t.poste.nroposte&&(t.poste.nroposte=""),t.lat=t.poste.lat,t.lng=t.poste.lng,t.fechaman=P["a"].formatDate(new Date,"YYYY-MM-DD"),t.horaman=P["a"].formatDate(new Date,"HH:mm"),this.puntos.push(t)})),this.$q.loading.hide(),console.log(this.puntos)}))}}},B=F,j=a("9989"),Y=a("9c40"),V=a("eaac"),G=a("db86"),H=a("27f9"),Z=a("0016"),W=a("24e8"),X=a("f09f"),J=a("a370"),K=a("0378"),tt=a("ddd8"),et=a("eebe"),at=a.n(et),ot=Object(f["a"])(B,L,Q,!1,null,null,null),it=ot.exports;at()(ot,"components",{QPage:j["a"],QBtn:Y["a"],QTable:V["a"],QTd:G["a"],QInput:H["a"],QIcon:Z["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QForm:K["a"],QSelect:tt["a"]});var st=function(){var t=this,e=t._self._c;return e("q-page",[e("l-map",{staticStyle:{height:"50vh"},attrs:{zoom:t.zoom,center:t.center}},[e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._l(t.puntostabla,(function(a){return e("l-marker",{key:a.id,attrs:{"lat-lng":[a.lat,a.lng]},on:{click:function(e){return t.frmmodalpunto(a)}}},[e("l-icon",[e("q-badge",{staticClass:"q-pa-xs",attrs:{color:"ATENDIDO"==a.estado?"info":"negative",label:""}}),e("div",{staticStyle:{color:"white","font-size":"15px","font-family":"'Arial Black'",opacity:"0.8","text-shadow":"2px 2px 0 #000"}},[t._v(t._s(a.nroposte))])],1)],1)}))],2),e("q-table",{attrs:{data:t.puntostabla,"hide-header":"",columns:t.colums,filter:t.filter},scopedSlots:t._u([{key:"body-cell-nombre",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[e("div",{staticClass:"text-subtitle2",staticStyle:{"font-size":"0.8em","white-space":"initial"}},[t._v(t._s(a.row.nombre)+"-"+t._s(a.row.telefono))])])]}},{key:"body-cell-nroposte",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n          "+t._s(a.row.nroposte)+"\n        ")])]}},{key:"body-cell-ubicacion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"ACTIVO"==a.row.estado?"primary":"negative",icon:"place",size:"xs"},on:{click:function(e){return t.clickclientes(a.row)}}})],1)]}},{key:"top-right",fn:function(){return[e("q-btn",{attrs:{icon:"refresh",color:"info"},on:{click:t.mispuntos}}),e("q-btn",{attrs:{icon:"adjust",color:"negative"},on:{click:t.centro}}),e("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0}])}),e("q-dialog",{attrs:{"full-width":""},model:{value:t.modalpunto,callback:function(e){t.modalpunto=e},expression:"modalpunto"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Nro poste "+t._s(t.punto.nroposte))])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-form",{on:{submit:t.updatedenuncia}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"nombre"},model:{value:t.punto.nombre,callback:function(e){t.$set(t.punto,"nombre",e)},expression:"punto.nombre"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"ci"},model:{value:t.punto.ci,callback:function(e){t.$set(t.punto,"ci",e)},expression:"punto.ci"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"telefono"},model:{value:t.punto.telefono,callback:function(e){t.$set(t.punto,"telefono",e)},expression:"punto.telefono"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"zona"},model:{value:t.punto.zona,callback:function(e){t.$set(t.punto,"zona",e)},expression:"punto.zona"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"textarea",label:"direccion"},model:{value:t.punto.direccion,callback:function(e){t.$set(t.punto,"direccion",e)},expression:"punto.direccion"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"textarea",label:"reclamo"},model:{value:t.punto.reclamo,callback:function(e){t.$set(t.punto,"reclamo",e)},expression:"punto.reclamo"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"lat"},model:{value:t.punto.lat,callback:function(e){t.$set(t.punto,"lat",e)},expression:"punto.lat"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"lng"},model:{value:t.punto.lng,callback:function(e){t.$set(t.punto,"lng",e)},expression:"punto.lng"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"fecha"},model:{value:t.punto.fecha,callback:function(e){t.$set(t.punto,"fecha",e)},expression:"punto.fecha"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"hora"},model:{value:t.punto.hora,callback:function(e){t.$set(t.punto,"hora",e)},expression:"punto.hora"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"estado"},model:{value:t.punto.estado,callback:function(e){t.$set(t.punto,"estado",e)},expression:"punto.estado"}})],1),e("div",{staticClass:"col-12 flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{label:"generar ruta",color:"primary",icon:"map",type:"a",target:"_blank",href:"https://www.google.com.bo/maps/place/"+t.punto.lat+","+t.punto.lng+"/@"+t.punto.lat+","+t.punto.lng+",17z/data=!3m1!4b1!4m6!3m5!1s0x0:0xeda9371aeb8c1574!7e2!8m2!3d-17.981432!4d-67.1061122?hl=es"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{required:"",dense:"",outlined:"",label:"tecnico"},model:{value:t.punto.tecnico,callback:function(e){t.$set(t.punto,"tecnico",e)},expression:"punto.tecnico"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{required:"",dense:"",outlined:"",type:"textarea",label:"actividad"},model:{value:t.punto.actividad,callback:function(e){t.$set(t.punto,"actividad",e)},expression:"punto.actividad"}})],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-12"},[e("div",{staticClass:"text-h6"},[t._v("LAMPARA W")]),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"70W"},model:{value:t.punto.l70,callback:function(e){t.$set(t.punto,"l70",e)},expression:"punto.l70"}}),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"150W"},model:{value:t.punto.l150,callback:function(e){t.$set(t.punto,"l150",e)},expression:"punto.l150"}}),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"250W"},model:{value:t.punto.l250,callback:function(e){t.$set(t.punto,"l250",e)},expression:"punto.l250"}}),e("q-btn",{attrs:{dense:"",color:"yellow",icon:"check"},on:{click:t.regActividad}})],1),e("div",{staticClass:"col-md-3 col-xs-12"},[e("div",{staticClass:"text-h6"},[t._v("REACTOR W")]),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"70W"},model:{value:t.punto.r70,callback:function(e){t.$set(t.punto,"r70",e)},expression:"punto.r70"}}),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"150W"},model:{value:t.punto.r150,callback:function(e){t.$set(t.punto,"r150",e)},expression:"punto.r150"}}),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"250W"},model:{value:t.punto.r250,callback:function(e){t.$set(t.punto,"r250",e)},expression:"punto.r250"}})],1),e("div",{staticClass:"col-md-3 col-xs-12"},[e("div",{staticClass:"text-h6"},[t._v("FOTOCELULA")]),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"Foto"},model:{value:t.punto.foto,callback:function(e){t.$set(t.punto,"foto",e)},expression:"punto.foto"}}),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"Base"},model:{value:t.punto.base,callback:function(e){t.$set(t.punto,"base",e)},expression:"punto.base"}})],1),e("div",{staticClass:"col-md-3 col-xs-12"},[e("div",{staticClass:"text-h6"},[t._v("VARIOS")]),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"IGNITOR"},model:{value:t.punto.ignitor,callback:function(e){t.$set(t.punto,"ignitor",e)},expression:"punto.ignitor"}}),e("q-input",{attrs:{outlined:"",dense:"",type:"number",step:"0.01",label:"CABLE M/L"},model:{value:t.punto.cable,callback:function(e){t.$set(t.punto,"cable",e)},expression:"punto.cable"}}),e("div",{staticClass:"row"},[e("q-toggle",{attrs:{"false-value":"NO",label:`Contactor ${t.punto.contactor}`,"true-value":"SI",color:"green"},model:{value:t.punto.contactor,callback:function(e){t.$set(t.punto,"contactor",e)},expression:"punto.contactor"}}),e("q-toggle",{attrs:{"false-value":"NO",label:`Termico ${t.punto.termico}`,"true-value":"SI",color:"green"},model:{value:t.punto.termico,callback:function(e){t.$set(t.punto,"termico",e)},expression:"punto.termico"}})],1),e("q-input",{attrs:{outlined:"",dense:"",type:"text",label:"SOQUET"},model:{value:t.punto.soquet,callback:function(e){t.$set(t.punto,"soquet",e)},expression:"punto.soquet"}})],1)]),e("div",{staticClass:"col-md-12 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"date",label:"fechaman"},model:{value:t.punto.fechaman,callback:function(e){t.$set(t.punto,"fechaman",e)},expression:"punto.fechaman"}})],1),e("div",{staticClass:"col-md-12 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"time",label:"fechaman"},model:{value:t.punto.horaman,callback:function(e){t.$set(t.punto,"horaman",e)},expression:"punto.horaman"}})],1),e("div",{staticClass:"col-12 flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{type:"submit",label:"Realizar mantenimiento",color:"positive",icon:"construction"}})],1)])])],1),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"}})],1)],1)],1),e("q-dialog",{attrs:{"full-width":""},model:{value:t.modalatendido,callback:function(e){t.modalatendido=e},expression:"modalatendido"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Nro poste "+t._s(t.punto.nroposte))])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-form",{on:{submit:t.updatedenuncia}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"nombre"},model:{value:t.punto.nombre,callback:function(e){t.$set(t.punto,"nombre",e)},expression:"punto.nombre"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"ci"},model:{value:t.punto.ci,callback:function(e){t.$set(t.punto,"ci",e)},expression:"punto.ci"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"telefono"},model:{value:t.punto.telefono,callback:function(e){t.$set(t.punto,"telefono",e)},expression:"punto.telefono"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"zona"},model:{value:t.punto.zona,callback:function(e){t.$set(t.punto,"zona",e)},expression:"punto.zona"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"textarea",label:"direccion"},model:{value:t.punto.direccion,callback:function(e){t.$set(t.punto,"direccion",e)},expression:"punto.direccion"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"textarea",label:"reclamo"},model:{value:t.punto.reclamo,callback:function(e){t.$set(t.punto,"reclamo",e)},expression:"punto.reclamo"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"lat"},model:{value:t.punto.lat,callback:function(e){t.$set(t.punto,"lat",e)},expression:"punto.lat"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"lng"},model:{value:t.punto.lng,callback:function(e){t.$set(t.punto,"lng",e)},expression:"punto.lng"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"fecha"},model:{value:t.punto.fecha,callback:function(e){t.$set(t.punto,"fecha",e)},expression:"punto.fecha"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"hora"},model:{value:t.punto.hora,callback:function(e){t.$set(t.punto,"hora",e)},expression:"punto.hora"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"estado"},model:{value:t.punto.estado,callback:function(e){t.$set(t.punto,"estado",e)},expression:"punto.estado"}})],1),e("div",{staticClass:"col-12 flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{label:"generar ruta",color:"primary",icon:"map",type:"a",target:"_blank",href:"https://www.google.com.bo/maps/place/"+t.punto.lat+","+t.punto.lng+"/@"+t.punto.lat+","+t.punto.lng+",17z/data=!3m1!4b1!4m6!3m5!1s0x0:0xeda9371aeb8c1574!7e2!8m2!3d-17.981432!4d-67.1061122?hl=es"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{required:"",dense:"",outlined:"",label:"tecnico"},model:{value:t.punto.tecnico,callback:function(e){t.$set(t.punto,"tecnico",e)},expression:"punto.tecnico"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{required:"",dense:"",outlined:"",type:"textarea",label:"actividad"},model:{value:t.punto.actividad,callback:function(e){t.$set(t.punto,"actividad",e)},expression:"punto.actividad"}})],1),e("div",{staticClass:"col-12"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"text-h6"},[t._v("LAMPARA W")]),e("q-input",{attrs:{type:"text",label:"70"},model:{value:t.punto.l70,callback:function(e){t.$set(t.punto,"l70",e)},expression:"punto.l70"}}),e("q-input",{attrs:{type:"text",label:"150"},model:{value:t.punto.l150,callback:function(e){t.$set(t.punto,"l150",e)},expression:"punto.l150"}}),e("q-input",{attrs:{type:"text",label:"250"},model:{value:t.punto.l250,callback:function(e){t.$set(t.punto,"l250",e)},expression:"punto.l250"}})],1)]),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"date",label:"fechaman"},model:{value:t.punto.fechaman,callback:function(e){t.$set(t.punto,"fechaman",e)},expression:"punto.fechaman"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"time",label:"fechaman"},model:{value:t.punto.horaman,callback:function(e){t.$set(t.punto,"horaman",e)},expression:"punto.horaman"}})],1)])])],1),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"}})],1)],1)],1)],1)},nt=[],lt={data(){return{modalpunto:!1,modalatendido:!1,estados:["ACTIVO","MANTENIMIENTO"],estado:"ACTIVO",filter:"",colums:[{name:"nroposte",label:"nroposte",field:"nroposte"},{name:"nombre",label:"nombre",field:"nombre"},{name:"ubicacion",label:"ubicacion",field:"ubicacion"}],puntos:[],puntostabla:[],punto:{},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:16,center:[-17.97031,-67.11178],markerLatLng:[-17.97031,-67.11178]}},created(){this.$store.state.login.booldenuncia||this.$router.replace({path:"/"}),this.mispuntos()},methods:{regActividad(){this.punto.actividad="",""!=this.punto.l70&&void 0!=this.punto.l70&&null!=this.punto.l70&&(this.punto.actividad+="LAMPARA 70W COD "+this.punto.l70+","),""!=this.punto.l150&&void 0!=this.punto.l150&&null!=this.punto.l150&&(this.punto.actividad+="LAMPARA 150W COD "+this.punto.l150+","),""!=this.punto.l250&&void 0!=this.punto.l250&&null!=this.punto.l250&&(this.punto.actividad+="LAMPARA 250W COD "+this.punto.l250+","),""!=this.punto.r70&&void 0!=this.punto.r70&&null!=this.punto.r70&&(this.punto.actividad+=" REACTOR 70W COD "+this.punto.r70+","),""!=this.punto.r150&&void 0!=this.punto.r150&&null!=this.punto.r150&&(this.punto.actividad+=" REACTOR 150W COD "+this.punto.r150+","),""!=this.punto.r250&&void 0!=this.punto.r250&&null!=this.punto.r250&&(this.punto.actividad+=" REACTOR 250W COD "+this.punto.r250+","),""!=this.punto.foto&&void 0!=this.punto.foto&&null!=this.punto.foto&&(this.punto.actividad+=" FOTOCELULA FOTO  "+this.punto.foto+","),""!=this.punto.base&&void 0!=this.punto.base&&null!=this.punto.base&&(this.punto.actividad+=" FOTOCELULA BASE  "+this.punto.base+","),""!=this.punto.ignitor&&void 0!=this.punto.ignitor&&null!=this.punto.ignitor&&(this.punto.actividad+=" IGNITOR COD "+this.punto.ignitor+","),""!=this.punto.cable&&void 0!=this.punto.cable&&null!=this.punto.cable&&(this.punto.actividad+=" CABLE M/L "+this.punto.cable+","),""!=this.punto.contactor&&void 0!=this.punto.contactor&&null!=this.punto.contactor&&"NO"!=this.punto.contactor&&(this.punto.actividad+=" SI CONTACTOR,"),""!=this.punto.termico&&void 0!=this.punto.termico&&null!=this.punto.termico&&"NO"!=this.punto.termico&&(this.punto.actividad+=" SI TERMICO,"),""!=this.punto.soquet&&void 0!=this.punto.soquet&&null!=this.punto.soquet&&(this.punto.actividad+=" soquet COD "+this.punto.soquet+",")},updatedenuncia(){this.$q.loading.show(),this.punto.supervisor=this.$store.state.login.user.name,this.punto.estado="ATENDIDO",console.log(this.punto.id),this.modalpunto=!1,this.$axios.put("denuncia/1",this.punto).then((t=>{console.log(t.data),this.mispuntos()}))},frmmodalpunto(t){"EN ESPERA"==t.estado?this.modalpunto=!0:this.modalatendido=!0,this.punto=t},clickclientes(t){this.center=[t.lat,t.lng],this.zoom=18},centro(){this.center=[-17.97031,-67.11178],this.zoom=13},mispuntos(){this.$q.loading.show(),this.$axios.get("denuncia").then((t=>{console.log(t.data),this.puntos=[],this.puntostabla=[],t.data.forEach((t=>{t.fechaman=P["a"].formatDate(new Date,"YYYY-MM-DD"),t.horaman=P["a"].formatDate(new Date,"HH:mm"),"EN ESPERA"==t.estado&&this.puntostabla.push(t),this.puntos.push(t)})),this.$q.loading.hide(),console.log(this.puntos)}))}}},rt=lt,ct=a("58a8"),dt=a("9564"),ut=a("4b7e"),pt=a("7f67"),mt=Object(f["a"])(rt,st,nt,!1,null,null,null),ht=mt.exports;at()(mt,"components",{QPage:j["a"],QBadge:ct["a"],QTable:V["a"],QTd:G["a"],QBtn:Y["a"],QInput:H["a"],QIcon:Z["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QForm:K["a"],QToggle:dt["a"],QSelect:tt["a"],QCardActions:ut["a"]}),at()(mt,"directives",{ClosePopup:pt["a"]});var bt=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pa-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-2"}),e("div",{staticClass:"col-12 col-md-8"},[e("q-card",[e("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("q-tab",{attrs:{name:"login",label:"Ingresar"}})],1),e("q-separator"),e("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("q-tab-panel",{attrs:{name:"login"}},[e("div",{staticClass:"text-h6"},[t._v("Ingresar al sistema")]),t._v("\n            Por favor colocar email y contraseña\n            "),e("q-form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-input",{attrs:{type:"email",outlined:"",label:"Email*",hint:"Porfavor ingresar email",rules:t.rule},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"email"}})]},proxy:!0}]),model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),e("div",{staticClass:"col-12 q-pt-md"},[e("q-input",{attrs:{outlined:"",label:"password*",type:t.isPwd?"password":"text",hint:"Porfavor ingresar password",rules:t.rule},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("div",{staticClass:"col-12 q-py-md"},[e("q-btn",{staticClass:"full-width",attrs:{label:"INGRESAR",color:"primary",icon:"login",type:"submit"}}),e("div",{staticClass:"text-caption q-py-xs"})],1)])])],1),e("q-tab-panel",{attrs:{name:"registro"}},[e("div",{staticClass:"text-h6"},[t._v("Registrate ")]),e("q-form",{on:{submit:function(e){return e.preventDefault(),t.registrar.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-input",{attrs:{outlined:"",type:"email",label:"Email*",hint:"Porfavor ingresar email",rules:t.rule,required:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"email"}})]},proxy:!0}]),model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),e("div",{staticClass:"col-12 q-pt-md"},[e("q-input",{attrs:{outlined:"",label:"Carnet o NIT*",hint:"Porfavor ingresar carnet o nit",rules:t.rule},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"credit_card"}})]},proxy:!0}]),model:{value:t.user.carnet,callback:function(e){t.$set(t.user,"carnet",e)},expression:"user.carnet"}})],1),e("div",{staticClass:"col-12 q-pt-md"},[e("q-input",{attrs:{outlined:"",label:"Nombre completo*",hint:"Porfavor ingresar nombre completo",rules:t.rule},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"people"}})]},proxy:!0}]),model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),e("div",{staticClass:"col-12 q-pt-md"},[e("q-input",{attrs:{outlined:"",label:"password*",type:t.isPwd?"password":"text",hint:"Porfavor ingresar carnet de identidad",rules:t.rule},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),e("div",{staticClass:"col-12 q-py-md"},[e("q-btn",{staticClass:"full-width",attrs:{label:"Crea tu cuenta",color:"primary",icon:"login",type:"submit"}}),e("q-btn",{staticClass:"full-width q-mt-xs",attrs:{label:"Ingresa",color:"secondary",icon:"how_to_reg"},on:{click:function(e){t.tab="login"}}}),e("div",{staticClass:"text-caption q-py-xs"},[e("a",{attrs:{target:"_blank",href:"https://api.whatsapp.com/send?phone=59169603027&text=olvide mi contraseña gamo"}},[t._v("Olvidate tu contraseña?")])])],1)])])],1)],1)],1)],1),e("div",{staticClass:"col-12 col-md-2"})])])},gt=[],ft={name:"login",data(){return{rule:[t=>t&&t.length>0||"Porfavor ingresar dato"],email:"",password:"",tab:"login",user:{},isPwd:!0,units:[],units2:[]}},created(){this.$store.getters["login/isLoggedIn"]&&this.$router.push("/home")},methods:{filterFn(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.units=this.units2.filter((t=>t.nombre.toLowerCase().indexOf(e)>-1))}:()=>{this.units=this.units2})},registrar(){this.$q.loading.show(),this.user.unit_id=1,this.$store.dispatch("login/register",this.user).then((()=>{this.$q.loading.hide(),this.$router.push("/asiganacion")})).catch((t=>{this.$q.loading.hide();let e="";Object.entries(t.response.data.errors).forEach((([t,a])=>{e+=` ${t}: ${a},`})),this.$q.notify({message:e,color:"red",icon:"error"})}))},login(){this.$q.loading.show(),this.$store.dispatch("login/login",{email:this.email,password:this.password}).then((t=>{this.$q.loading.hide(),this.$router.push("/home")})).catch((t=>{this.$q.loading.hide(),console.log(t.response.data.message),this.$q.notify({message:t.response.data.message,color:"red",icon:"error"})}))}}},vt=ft,qt=a("429b"),Ct=a("7460"),xt=a("eb85"),yt=a("adad"),_t=a("823b"),kt=Object(f["a"])(vt,bt,gt,!1,null,"238363c2",null),wt=kt.exports;at()(kt,"components",{QPage:j["a"],QCard:X["a"],QTabs:qt["a"],QTab:Ct["a"],QSeparator:xt["a"],QTabPanels:yt["a"],QTabPanel:_t["a"],QForm:K["a"],QInput:H["a"],QIcon:Z["a"],QBtn:Y["a"],QSelect:tt["a"]});var Ot=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pa-none"},[e("GmapMap",{staticStyle:{width:"100%",height:"550px"},attrs:{center:{lat:-17.97031,lng:-67.11178},zoom:13,"map-type-id":"terrain"}},[e("GmapMarker",{staticClass:"bg-red text-bold",attrs:{position:{lat:-17.97031,lng:-67.11178},label:"a",options:{style:"color-red"},clickable:!0,draggable:!0,icon1:{url:"https://toppng.com/uploads/preview/map-marker-icon-600x-map-marker-11562939743ayfahlvygl.png",scaledSize:{width:20,height:20},labelOrigin:{x:20,y:20}}}})],1),t._v("\r\n  "+t._s(t.center)+"\r\n")],1)},At=[],Dt=(a("6cee"),{name:"Mapa",components:{},data(){return{center:{lat:10,lng:10},options:{styles:["color:green"]},markers:[],marker:{lat:-17.97031,lng:-67.11178}}},created(){this.mispuntos()},methods:{getOptions(){return{zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,disableDefaultUi:!1}},mispuntos(){this.$q.loading.show();var t="https://maps.google.com/mapfiles/kml/shapes/",e={parking:{icon:t+"parking_lot_maps.png"},library:{icon:t+"library_maps.png"},info:{icon:t+"info-i_maps.png"}};this.$axios.get("punto").then((t=>{this.markers=[],t.data.forEach((t=>{t.position={lat:t.lat,lng:t.lng},t.icon=e["info"].icon,this.markers.push(t)})),this.$q.loading.hide()}))}}}),Et=Dt,It=Object(f["a"])(Et,Ot,At,!1,null,"0b6602e3",null),Rt=It.exports;at()(It,"components",{QPage:j["a"]});var $t=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pa-xs"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-card",[e("q-card-section",{staticClass:"bg-green text-white text-center text-subtitle2"},[t._v("Reporte de denuncias")]),e("q-card-section",[e("q-form",{on:{submit:function(e){return e.preventDefault(),t.reporte2.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-4"},[e("q-input",{attrs:{outlined:"",dense:"",label:"Fecha inicio",type:"date"},model:{value:t.fecha1,callback:function(e){t.fecha1=e},expression:"fecha1"}})],1),e("div",{staticClass:"col-12 col-sm-4"},[e("q-input",{attrs:{outlined:"",dense:"",label:"Fecha fin",type:"date"},model:{value:t.fecha2,callback:function(e){t.fecha2=e},expression:"fecha2"}})],1),e("div",{staticClass:"col-12 col-sm-4 flex flex-center"},[e("q-btn",{staticClass:"full-width full-height",attrs:{type:"submit",label:"Generar reporte",color:"positive",icon:"print"}})],1)])])],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-table",{attrs:{title:"Denuncias",data:t.misdenuncias,color:"primary","row-key":"name",columns:t.columns},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Exportar a csv","no-caps":""},on:{click:t.exportTable}})]},proxy:!0}])})],1)]),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})])},St=[],Tt=a("8baf"),Nt=a("a357");function Mt(t,e,a){let o=void 0!==e?e(t,a):t;return o=void 0===o||null===o?"":String(o),o=o.split('"').join('""'),`"${o}"`}var Lt={name:"Reportedenuncia",data(){return{fecha1:P["a"].formatDate(new Date,"YYYY-MM-DD"),fecha2:P["a"].formatDate(new Date,"YYYY-MM-DD"),misdenuncias:[],cadena:"",columns:[{name:"actividad",field:"actividad",label:"ACTIVIDAD"},{name:"ci",field:"ci",label:"CI"},{name:"direccion",field:"direccion",label:"DIRECCION"},{name:"estado",field:"estado",label:"ESTADO"},{name:"fecha",field:"fecha",label:"FECHA"},{name:"fechaman",field:"fechaman",label:"FECHA MAN"},{name:"hora",field:"hora",label:"HORA"},{name:"horaman",field:"horaman",label:"HORA MAN"},{name:"id",field:"id",label:"ID"},{name:"lat",field:"lat",label:"lat"},{name:"lng",field:"lng",label:"lng"},{name:"nombre",field:"nombre",label:"NOMBRE"},{name:"nroposte",field:"nroposte",label:"NRO POSTE"},{name:"reclamo",field:"reclamo",label:"RECLAMO"},{name:"supervisor",field:"supervisor",label:"SUPERVISOR"},{name:"tecnico",field:"tecnico",label:"TECNICO"},{name:"telefono",field:"telefono",label:"TELEFONO"},{name:"zona",field:"zona",label:"ZONA"}]}},created(){this.$store.state.login.boolreporte||this.$router.replace({path:"/"})},methods:{exportTable(){const t=[this.columns.map((t=>Mt(t.label)))].concat(this.misdenuncias.map((t=>this.columns.map((e=>Mt("function"===typeof e.field?e.field(t):t[void 0===e.field?e.name:e.field],e.format,t))).join(",")))).join("\r\n"),e=Object(Nt["a"])(P["a"].formatDate(new Date,"YYYY-MM-DD")+"Denuncias.csv",t,"text/csv");!0!==e&&$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},reporte2(){this.cadena="",this.$axios.post("consulta",{inicio:this.fecha1,fin:this.fecha2}).then((t=>{this.misdenuncias=t.data,this.cadena="<style>          *{font-size:10px}          table{width:100%; border-collapse: collapse;}          table, th, td {  border: 1px solid;}          titulo{font-weight: bold; font-size:16px; text-align: center;}          </style>          <div >            <table style='border:0;'><tr><td style='border:0;width:20%;'><img src='logo.jpg' style='width:50px; height:50px;'/></td>               <td class='titulo' style='border:0;'> RESUMEN DE DENUNCIAS DEL "+this.fecha1+" AL "+this.fecha2+"</td>               </tr>            </table>            <table>            <thead><tr><th>N</th><th>FECHA</th><th>N POSTE</th><th>ESTADO</th><th>CONTRIBUYENTE</th><th>CI/RUN</th><th>HORA</th><th>OPERADOR</th><th>FECHA MAN</th><th>ACTIVIDAD</th></tr></thead>          <tbody>";let e=0;this.misdenuncias.forEach((t=>{e++,null==t.tecnico&&(t.tecnico=""),null==t.fechaman&&(t.fechaman=""),null==t.actividad&&(t.actividad=""),this.cadena+="<tr>              <td>"+e+"</td>              <td>"+t.fecha+"</td>              <td>"+t.nroposte+"</td>              <td>"+t.estado+"</td>              <td>"+t.nombre+"</td>              <td>"+t.ci+"</td>              <td>"+t.hora+"</td>              <td>"+t.tecnico+"</td>              <td>"+t.fechaman+"</td>              <td>"+t.actividad+"</td>              </tr>"})),this.cadena+="</tbody></table></div>",console.log(this.cadena),document.getElementById("myelement").innerHTML=this.cadena;const a=new z["Printd"];a.print(document.getElementById("myelement"))}))},reporte(){this.$q.loading.show(),this.$axios.post("consulta",{inicio:this.fecha1,fin:this.fecha2}).then((t=>{this.misdenuncias=t.data;let e=this;function a(){var t=new Image;t.src="logo.jpg",o.addImage(t,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.setFontSize(9),o.text(5,1,"RESUMEN DIARIO DE INGRESOS"),o.text(5,1.5,"DEL "+e.fecha1+" AL "+e.fecha2),o.text(1,3,"__________________________________________________________________________________________________"),o.text(1,3,"FECHA"),o.text(3,3,"Nº POSTE"),o.text(5.5,3,"ESTADO"),o.text(7.5,3,"CONTRIBUYENTE"),o.text(12.8,3,"CI/RUN"),o.text(14.3,3,"HORA."),o.text(16,3,"OPERADOR"),o.text(18.7,3,"Fecha Man."),o.text(21.2,3,"Actividad"),o.setFont(void 0,"normal")}var o=new Tt["a"]("L","cm","letter");o.setFont("courier"),a(this.fecha);let i=0,s=0;this.misdenuncias.forEach((t=>{console.log(t),i+=.4,s++,o.setFontSize(8),o.text(1,i+3,t.fecha),o.text(3,i+3,t.nroposte.substring(0,15)),o.text(5.5,i+3,t.estado),o.text(7.5,i+3,t.nombre.substring(0,30)),o.text(12.8,i+3,t.ci),o.text(14.3,i+3,t.hora),o.text(16,i+3,null==t.tecnico?"":t.tecnico.substring(0,15)),o.text(18.7,i+3,null==t.fechaman?"":t.fechaman),o.text(21.2,i+3,null==t.actividad?"":t.actividad.substring(30)),i>=16&&(o.addPage(),a(),i=0)})),o.setFontSize(9),o.setFont(void 0,"bold"),o.text(3,i+3.5,"SON: "+s+" DENUNCIAS"),o.text(1.8,i+5,"_____________________          _____________________________       _________________________"),o.text(2,i+5.3,"FIRMA SELLO CAJERO"),o.text(8,i+5.3,"FIRMA SELLO CONTROL INTERNO"),o.text(15,i+5.3,"FIRMA SELLO LIQUIDADOR"),window.open(o.output("bloburl"),"_blank"),this.$q.loading.hide()}))}}},Qt=Lt,Pt=Object(f["a"])(Qt,$t,St,!1,null,"65663a43",null),zt=Pt.exports;at()(Pt,"components",{QPage:j["a"],QCard:X["a"],QCardSection:J["a"],QForm:K["a"],QInput:H["a"],QBtn:Y["a"],QTable:V["a"]});var Ut=function(){var t=this,e=t._self._c;return e("q-page",[e("div",{staticClass:"row col-12"},[e("div",{staticClass:"col-md-3 col-xs-8"},[e("q-select",{attrs:{dense:"",options:t.distritos,label:"Distritos",ourlined:""},model:{value:t.distrito,callback:function(e){t.distrito=e},expression:"distrito"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{color:"green",icon:"search"},on:{click:t.mispuntos}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{color:"teal",icon:"add_circle_outline"},on:{click:function(e){t.punto={},t.dialogRegistro=!0}}})],1),e("div",{staticClass:"col-md-3 col-xs-10"},[e("q-input",{attrs:{dense:"",outlined:"",type:"text",label:"Numero Poste"},model:{value:t.numeroposte,callback:function(e){t.numeroposte=e},expression:"numeroposte"}})],1),e("div",{staticClass:"col-1"},[e("q-btn",{attrs:{color:"info",icon:"place"},on:{click:t.searchPlace}})],1)]),e("div",{staticClass:"col-12"},[e("l-map",{staticStyle:{height:"50vh"},attrs:{zoom:t.zoom,center:t.center}},[e("l-tile-layer",{attrs:{url:t.styleMap?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap",attribution:t.attribution}}),t._l(t.datos,(function(a){return e("l-marker",{key:a.id,attrs:{"lat-lng":[a.lat,a.lng]},on:{click:function(e){t.center=[a.lat,a.lng],t.punto=a,t.modalpunto=!0,t.recmtto=""}}},[e("l-icon",[e("img",{attrs:{src:"img/"+a.color}}),e("div",{staticClass:"headline"},[t._v("\n           "+t._s(a.nroposte)+"\n         ")])]),t._v("/>\n         ")],1)})),e("l-control",{attrs:{position:"topright"}},[e("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"map",dense:"",round:""},on:{click:function(e){t.styleMap=!t.styleMap}}})],1)],2)],1),e("q-table",{attrs:{data:t.datos,columns:t.colums,filter:t.filter},scopedSlots:t._u([{key:"body-cell-potencia",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n         "+t._s(a.row.potencia)+"\n       ")])]}},{key:"body-cell-nroposte",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n         "+t._s(a.row.nroposte)+"\n       ")])]}},{key:"body-cell-material",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[e("div",{staticClass:"text-subtitle2",staticStyle:{"font-size":"0.8em","white-space":"initial"}},[t._v(t._s(a.row.material))])])]}},{key:"body-cell-observacion",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[e("div",{staticClass:"text-subtitle2",staticStyle:{"font-size":"0.8em","white-space":"initial"}},[t._v(t._s(a.row.observacion))])])]}},{key:"body-cell-ubicacion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"ACTIVO"==a.row.estado?"primary":"negative",icon:"place",size:"xs"},on:{click:function(e){return t.clickclientes(a.row)}}})],1)]}},{key:"top-right",fn:function(){return[e("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0}])}),e("q-dialog",{attrs:{"full-width":""},model:{value:t.modalpunto,callback:function(e){t.modalpunto=e},expression:"modalpunto"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Nro poste "+t._s(t.punto.nroposte)+" latlng ("+t._s(t.punto.lat)+","+t._s(t.punto.lng)+")")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Nro Poste",readonly:""},model:{value:t.punto.nroposte,callback:function(e){t.$set(t.punto,"nroposte",e)},expression:"punto.nroposte"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Potencia",readonly:""},model:{value:t.punto.potencia,callback:function(e){t.$set(t.punto,"potencia",e)},expression:"punto.potencia"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Material",readonly:""},model:{value:t.punto.material,callback:function(e){t.$set(t.punto,"material",e)},expression:"punto.material"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Luminaria",readonly:""},model:{value:t.punto.luminaria,callback:function(e){t.$set(t.punto,"luminaria",e)},expression:"punto.luminaria"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Cant Luminarias",readonly:""},model:{value:t.punto.cantidad,callback:function(e){t.$set(t.punto,"cantidad",e)},expression:"punto.cantidad"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Observacion",readonly:""},model:{value:t.punto.observacion,callback:function(e){t.$set(t.punto,"observacion",e)},expression:"punto.observacion"}})],1)])]),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Mantenimiento",color:"accent"},on:{click:t.registroMtto}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cerrar",color:"green"}})],1)],1)],1)],1)},Ft=[],Bt={data(){return{datos:[],prueba:"",styleMap:!0,numeroposte:"",recmtto:"",distritos:[{label:"Distrito 1",value:"D1"},{label:"Distrito 2",value:"D2"},{label:"Distrito 2 Ext",value:"D2 EXT"},{label:"Distrito 3",value:"D3"},{label:"Distrito 3 Ext",value:"D3 EXT"},{label:"Distrito 4",value:"D4"},{label:"Distrito 4 Ext",value:"D4 EXT"},{label:"Distrito 5",value:"D5"},{label:"Distrito 5 Ext",value:"D5 EXT"}],distrito:{label:"Distrito 1",value:"D1"},modalpunto:!1,plan:{},estados:["ACTIVO","MANTENIMIENTO"],postes:[],d1:[],d1e:[],d2:[],d2e:[],d3:[],d3e:[],d4:[],d4e:[],d5:[],d5e:[],estado:"ACTIVO",filter:"",colums:[{name:"id",label:"id",field:"id"},{name:"nroposte",label:"nroposte",field:"nroposte"},{name:"potencia",label:"potencia",field:"potencia"},{name:"material",label:"material",field:"material"},{name:"observacion",label:"observacion",field:"observacion"},{name:"ubicacion",label:"ubicacion",field:"ubicacion"}],puntos:[],map:null,punto:{},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:16,center:[-17.97031,-67.11178],markerLatLng:[-17.97031,-67.11178]}},created(){this.$store.state.login.boolgeneral||this.$router.replace({path:"/"})},methods:{searchPlace(){if(""==this.numeroposte||void 0==this.numeroposte)return this.datos=[],!1;this.datos=[],this.$axios.get("buscarPoste/"+this.numeroposte).then((t=>{console.log(t.data),t.data.length>0&&(this.datos.push(t.data[0]),this.ubicacion={lat:t.data[0].lat,lng:t.data[0].lng},this.center=this.ubicacion,this.zoom=18)}))},registroMtto(){this.$q.dialog({title:"Enviar a Mantenimiento",message:"Esta Seguro?",cancel:!0,persistent:!1}).onOk((()=>{this.plan.fecha=P["a"].formatDate(new Date,"YYYY-MM-DD"),this.plan.hora=P["a"].formatDate(new Date,"HH:mm"),this.plan.punto=this.punto,this.plan.reclamo="MANTENIMIENTO ",this.$axios.post("matto",this.plan).then((t=>{this.modalpunto=!1,this.recmtto="",this.$q.notify({message:"Su Reclamo fue Registrado",color:"green",icon:"info"})})).catch((t=>{this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},async onClick(){switch(console.log(this.distrito.value),this.distrito.value){case"D1":this.datos=this.d1;break;case"D1 EXT":this.datos=this.d1e;break;case"D2":this.datos=this.d2;break;case"D2 EXT":this.datos=this.d2e;break;case"D3":this.datos=this.d3;break;case"D3 EXT":this.datos=this.d3e;break;case"D4":this.datos=this.d4;break;case"D4 EXT":this.datos=this.d4e;break;case"D5":this.datos=this.d5;break;case"D5 EXT":this.datos=this.d5e;break;default:this.datos=[];break}},frmmodalpunto(t){this.modalpunto=!0,this.punto=t,this.recmtto=""},async clickclientes(t){this.center=[t.lat,t.lng],this.zoom=18},cambioestado(){console.log(this.punto),this.$axios.put("poste/"+this.punto.id,this.punto)},mispuntos(){this.postes=[],this.$q.loading.show(),this.$axios.post("listaposte",{distrito:this.distrito.value}).then((t=>{this.datos=t.data,this.$q.loading.hide(),console.log(this.datos)}))}}},jt=Bt,Yt=Object(f["a"])(jt,Ut,Ft,!1,null,null,null),Vt=Yt.exports;at()(Yt,"components",{QPage:j["a"],QBadge:ct["a"],QSelect:tt["a"],QBtn:Y["a"],QInput:H["a"],QTable:V["a"],QTd:G["a"],QIcon:Z["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QCardActions:ut["a"]}),at()(Yt,"directives",{ClosePopup:pt["a"]});var Gt=function(){var t=this,e=t._self._c;return e("q-page",[e("iframe",{attrs:{src:"https://www.google.com/maps/d/embed?mid=1p-L6PAC7LgRAPOhdxNBScFUvJfL3iAU&ehbc=2E312F",width:"100%",height:"480"}}),e("iframe",{attrs:{src:"https://www.google.com/maps/d/u/0/embed?mid=1OXQlfLi5c9u-UVoyMmRKXUQ9Tom3Kb4&ehbc=2E312F",width:"100%",height:"480"}}),e("iframe",{attrs:{src:"https://www.google.com/maps/d/u/0/embed?mid=1uhvCU2-Vex489UDhTOdwqlUQuYNy7h0&ehbc=2E312F",width:"100%",height:"480"}})])},Ht=[],Zt={data(){return{accessToken:"pk.eyJ1IjoiYWxleGxvcGV6ZyIsImEiOiJjbGYxazg1YmkwNGlkM3hudmpkZWVlczVuIn0.b6sTYHtmkdGnfqUsQzYprw",modalpunto:!1,estados:["ACTIVO","MANTENIMIENTO"],postes:[],d1:[],d1e:[],d2:[],d2e:[],d3:[],d3e:[],d4:[],d4e:[],d5:[],d5e:[],d6:[],d6e:[],estado:"ACTIVO",filter:"",colums:[{name:"id",label:"id",field:"id"},{name:"nroposte",label:"nroposte",field:"nroposte"},{name:"potencia",label:"potencia",field:"potencia"},{name:"material",label:"material",field:"material"},{name:"observacion",label:"observacion",field:"observacion"},{name:"ubicacion",label:"ubicacion",field:"ubicacion"}],puntos:[],map:null,punto:{},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:16,center:{lat:-17.97031,lng:-67.11178},markerLatLng:[-17.97031,-67.11178]}},created(){},methods:{frmmodalpunto(t){this.modalpunto=!0,this.punto=t},clickclientes(t){this.center={lat:t.lat,lng:t.lng},this.zoom=18}}},Wt=Zt,Xt=Object(f["a"])(Wt,Gt,Ht,!1,null,null,null),Jt=Xt.exports;at()(Xt,"components",{QPage:j["a"]});var Kt=function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"lHh Lpr lFf"}},[e("q-header",{attrs:{elevated:""}},[e("q-toolbar",[e("q-toolbar-title",[e("div",{staticClass:"text-center full-width text-h6 text-bold",staticStyle:{"font-size":"14px"}},[e("q-img",{staticStyle:{height:"40px","max-width":"50px"},attrs:{src:"logo.png","spinner-color":"white"}}),t._v("\n          Gobierno Autonomo Municipal de Oruro "),e("br"),t._v("Unidad de Alumbrado Publico y Servicios Electricos\n        ")],1)]),e("div")],1)],1),e("q-page-container",[e("q-page",[e("div",{staticClass:"row",style:t.backgroundDiv},[e("div",{staticClass:"q-pa-md col-md-6 col-xs-12"},[e("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[e("q-btn",{staticClass:"text-h6",attrs:{dense:"",color:"green"},on:{click:function(e){return t.$router.replace({path:"/consulta"})}}},[t._v("IR CONSULTA RECLAMOS")])],1),e("div",{staticClass:"q-pa-xs"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",outlined:"",rounded:"",label:"Cedula de Identidad *"},on:{change:t.buscar},model:{value:t.persona.ci,callback:function(e){t.$set(t.persona,"ci",e)},expression:"persona.ci"}})],1),e("div",{staticClass:"q-pa-xs"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",outlined:"",rounded:"",type:"text",label:"Nombre Completo *"},model:{value:t.persona.nombre,callback:function(e){t.$set(t.persona,"nombre",e)},expression:"persona.nombre"}})],1),e("div",{staticClass:"q-pa-xs"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",outlined:"",rounded:"",type:"text",label:"Celular *"},model:{value:t.persona.telefono,callback:function(e){t.$set(t.persona,"telefono",e)},expression:"persona.telefono"}})],1),e("div",{staticClass:"q-pa-xs row"},[e("div",{staticClass:"col-10"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",dense:"",outlined:"",rounded:"",type:"text",label:"Nro Poste"},model:{value:t.nposte,callback:function(e){t.nposte=e},expression:"nposte"}})],1),e("q-btn",{attrs:{color:"green",icon:"search"},on:{click:t.buscarPoste}})],1),e("div",{staticStyle:{color:"white","font-weight":"bold",background:"gray","font-size":"10px"}},[t._v(" * Puede arrastrar su ubicacion o hacer click en cualquier parte del mapa")]),e("div",{staticStyle:{color:"white","font-weight":"bold",background:"gray","font-size":"10px"}},[t._v(" * Hacer click al punto de su ubicacion para cargar los postes cercanos")]),e("div",{staticStyle:{color:"white","font-weight":"bold",background:"gray","font-size":"10px"}},[t._v(" * Click sobre alguno de los postes para registrar su reclamo")])]),e("div",{staticClass:"q-pa-md col-md-6 col-xs-12"},[e("l-map",{staticStyle:{height:"50vh"},attrs:{zoom:t.zoom,center:t.center},on:{click:t.cargarpunto}},[e("l-tile-layer",{attrs:{url:t.styleMap?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap",attribution:t.attribution}}),e("l-marker",{attrs:{"lat-lng":[t.lat,t.lng],draggable:"",title:"Usted esta Aqui"},on:{moveend:t.updateCoordinates,click:t.cargarUbicacion}},[e("l-icon",{attrs:{"icon-url":"http://maps.google.com/mapfiles/ms/icons/ylw-pushpin.png"}})],1),t._l(t.datos,(function(a){return e("l-marker",{key:a.id,attrs:{"lat-lng":[a.lat,a.lng]},on:{click:function(e){t.center=[a.lat,a.lng],t.punto=a,t.seleccionar()}}},[e("l-icon",{attrs:{"icon-url":"http://maps.google.com/mapfiles/ms/icons/red-dot.png"}})],1)})),e("l-control",{attrs:{position:"topright"}},[e("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"map",dense:"",round:""},on:{click:function(e){t.styleMap=!t.styleMap}}})],1)],2)],1)]),e("q-dialog",{attrs:{"full-width":""},model:{value:t.dialogReclamo,callback:function(e){t.dialogReclamo=e},expression:"dialogReclamo"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Datos de Alumbrado "+t._s(t.punto.nroposte))]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("MATERIAL :")]),t._v(" "+t._s(t.punto.material))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("LUMINARIA :")]),t._v(" "+t._s(t.punto.luminaria))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("ALTURA :")]),t._v(" "+t._s(t.punto.altura))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("POTENCIA :")]),t._v(" "+t._s(t.punto.potencia))]),e("div",{staticClass:"col-12"},[e("b",[t._v("OBSERVACION : ")]),t._v(t._s(t.punto.observacion))])])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Detalle del reclamo",type:"textarea"},model:{value:t.denuncia.reclamo,callback:function(e){t.$set(t.denuncia,"reclamo",e)},expression:"denuncia.reclamo"}})],1),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"red",icon:"cancel"}}),e("q-btn",{attrs:{flat:"",label:"Registrar",color:"green",icon:"send"},on:{click:t.registrarReclamo}})],1)],1)],1)],1),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})],1)],1)},te=[];a("df7c");const ee=a("d055");var ae={name:"PageIndex",data(){return{styleMap:!0,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",url2:"https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:16,markerLatLng:[-17.97031,-67.11178],persona:{},punto:{},denuncia:{},nposte:"",dialogReclamo:!1,lat:0,lng:0,marker:{},postes:[],urlbase:"https://electrica.gamo.cf/#/consulta",datos:[],ubicacion:[-17.97031,-67.11178],center:[-17.97031,-67.11178],backgroundDiv:{backgroundImage:"url(bg.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"},opts:{errorCorrectionLevel:"M",type:"png",quality:.95,width:100,margin:1,color:{dark:"#000000",light:"#FFF"}},opts2:{errorCorrectionLevel:"M",type:"png",quality:.95,width:50,margin:1,color:{dark:"#000000",light:"#FFF"}}}},mounted(){this.geolocate()},methods:{async printReclamo(t){this.qrImage=await ee.toDataURL(this.urlbase+"/"+t.persona.ci,this.opts);let e="<style>      .titulo{      font-size: 10px;      text-align: center;      font-weight: bold;      }      .titulo2{      font-size: 10px;      font-weight: bold;      text-align: center;      }            .titulo3{      font-size: 9px;      text-align: center;      width:70%;      }            .contenido{      font-size: 10px;      text-align: left;      }      .conte2{      font-size: 9px;      text-align: right;      }      .campotd{      text-align: center;      }      .titder{      font-size: 10px;      text-align: right;      font-weight: bold;      }      hr{  border-top: 1px dashed   ;}  table{    width:100%  }  h1 {    color: black;    font-family: sans-serif;  }</style>    <div id='myelement' style='background-image:url(logo3.png);background-repeat: no-repeat; background-size: 30px 60px;'>      <div class='titulo2' >        GOBIERNO AUTONOMO MUNICIPAL DE ORURO<br>        UNIDAD DE ALUMBRADO PUBLICO <br>Y SERVICIOS ELECTRICOS<br>        Reclamo Nro: "+t.id+"<br>        Oruro      </div>      <hr>      <table>        <tr><td class='titder'>FECHA REGISTRO:</td><td class='contenido'>"+t.fecha+"</td></tr>        <tr><td class='titder'>CI:</td><td class='contenido'>"+t.persona.ci+"</td></tr>        <tr><td class='titder'>NOMBRE:</td><td class='contenido'>"+t.persona.nombre+"</td></tr>        <tr><td class='titder'>TELEFONO:</td><td class='contenido'>"+t.persona.telefono+"</td></tr>      </table>       <hr>      <div class='titulo'>DETALLE RECLAMO</div>      <div  class='contenido'>"+t.reclamo+"</div>      <div style='display: flex;justify-content: center;'>  <img src="+this.qrImage+" >      </div>      </div>            ";document.getElementById("myelement").innerHTML=e;const a=new z["Printd"];a.print(document.getElementById("myelement"))},handleMarkerDrag(t){this.ubicacion={lat:t.latLng.lat(),lng:t.latLng.lng()}},cargarUbicacion(){this.$axios.post("calcularArea",{lat:this.lat,lng:this.lng,distancia:200}).then((t=>{console.log(t.data),this.datos=t.data}))},cargarpunto(t){console.log(t.latlng),this.lat=t.latlng.lat,this.lng=t.latlng.lng,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion},updateCoordinates(t){this.lat=t.target._latlng.lat,this.lng=t.target._latlng.lng,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion},registrarReclamo(){if(void 0==this.denuncia.reclamo||""==this.denuncia.reclamo)return this.$q.notify({message:"Ingrese su Reclamo",color:"red",icon:"info"}),!1;void 0==this.persona.id&&(this.persona.id=""),this.denuncia.persona=this.persona,this.denuncia.fecha=P["a"].formatDate(new Date,"YYYY-MM-DD"),this.denuncia.hora=P["a"].formatDate(new Date,"HH:mm"),this.denuncia.punto=this.punto,this.$axios.post("reclamo",this.denuncia).then((t=>{console.log(t.data),this.printReclamo(t.data),this.dialogReclamo=!1,this.$q.notify({message:"Su Reclamo fue Registrado",color:"green",icon:"info"})})).catch((t=>{this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})})),this.denuncia.reclamo="",this.persona={},this.denuncia={},this.nposte=""},seleccionar(){if(void 0==this.persona.ci||void 0==this.persona.nombre||void 0==this.persona.telefono)return this.$q.notify({message:"Ingrese su Datos",color:"red",icon:"info"}),!1;this.zoom=19,this.dialogReclamo=!0},cargar(t){switch(this.$q.loading.show(),t){case"D1":this.datos=this.d1;break;case"D2":this.datos=this.d2;break;case"D3":this.datos=this.d3;break;case"D4":this.datos=this.d4;break;case"D5":this.datos=this.d5;break;default:this.datos=[];break}this.$q.loading.hide()},buscarPoste(){this.datos=[],this.$axios.get("buscarPoste/"+this.nposte).then((t=>{console.log(),t.data.length>0&&(this.datos.push(t.data[0]),this.ubicacion={lat:t.data[0].lat,lng:t.data[0].lng},this.center=this.ubicacion,this.zoom=18)}))},buscar(){let t=this.persona.ci;this.$axios.post("buscarPersona/"+t).then((e=>{console.log(e.data),e.data?this.persona=e.data:(this.persona={},this.persona.ci=t)}))},async geolocate(){this.ubicacion=[0,0],console.log(navigator.geolocation),navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{console.log(t),this.lat=t.coords.latitude,this.lng=t.coords.longitude,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion,this.zoom=17,this.$axios.post("calcularArea",{lat:this.lat,lng:this.lng,distancia:200}).then((t=>{console.log(t.data),this.datos=t.data}))}),(function(t){switch(t.code){case t.PERMISSION_DENIED:console.log("El usuario denegó el permiso para la Geolocalización");break;case t.POSITION_UNAVAILABLE:console.log("La ubicación no está disponible.");break;case t.TIMEOUT:console.log("Se ha excedido el tiempo para obtener la ubicación");break;case t.UNKNOWN_ERROR:console.log(" Un error desconocido.");break}}))}}},oe=ae,ie=a("4d5a"),se=a("e359"),ne=a("65c6"),le=a("6ac5"),re=a("068f"),ce=a("09e3"),de=a("54e1"),ue=Object(f["a"])(oe,Kt,te,!1,null,null,null),pe=ue.exports;at()(ue,"components",{QLayout:ie["a"],QHeader:se["a"],QToolbar:ne["a"],QToolbarTitle:le["a"],QImg:re["a"],QPageContainer:ce["a"],QPage:j["a"],QBanner:de["a"],QBtn:Y["a"],QInput:H["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QCardActions:ut["a"]}),at()(ue,"directives",{ClosePopup:pt["a"]});var me=function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"lHh Lpr lFf"}},[e("q-header",{attrs:{elevated:""}},[e("q-toolbar",[e("q-toolbar-title",[e("q-img",{staticStyle:{width:"30px"},attrs:{src:"logo.png"}})],1),e("div")],1)],1),e("q-page-container",[e("q-page",{},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-form",{on:{submit:function(e){return e.preventDefault(),t.buscar.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-8 q-pa-xs"},[e("q-input",{attrs:{outlined:"",dense:"",label:"Ingrese numero de carnet / nro Poste",autofocus:""},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),e("div",{staticClass:"col-12 col-md-2 q-pa-xs flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{label:"Buscar",color:"primary",icon:"send",type:"submit"}}),e("q-btn",{staticClass:"full-width",attrs:{label:"Ir Registro",color:"green",icon:"location_on"},on:{click:function(e){return t.$router.replace({path:"/reclamoalumbrado"})}}})],1)])])],1),e("div",{staticClass:"col-12 col-md-12"},[e("q-banner",{staticClass:"bg-primary text-white",attrs:{dense:""}},[t._v("\n          Datos Reclamos por "+t._s(t.persona.nombre)+"\n        ")])],1),e("div",{staticClass:"col-12 col-md-12"},[e("q-table",{attrs:{title:"Datos del poste",data:t.datos,columns:t.columns},scopedSlots:t._u([{key:"body-cell-estado",fn:function(t){return[e("q-td",{attrs:{props:t}},[e("q-badge",{attrs:{color:"EN ESPERA"==t.row.estado?"warning":"positive",label:t.row.estado}})],1)]}}])})],1)])])],1)],1)},he=[],be={data(){return{columns:[{label:"Nro",field:t=>t.poste.nroposte,name:"nroposte"},{label:"Reclamo",field:"reclamo",name:"reclamo"},{label:"Estado",field:"estado",name:"estado"},{label:"Fecha",field:"fecha",name:"fecha",sortable:!0},{label:"Tecnico",field:"tecnico",name:"tecnico"},{label:"Actividad",field:"actividad",name:"actividad"},{label:"Fecha mantenimiento",field:"fechaman",name:"fechaman",sortable:!0}],cedula:this.$route.params.cedula,url:"https://electricab.gamo.cf/api/",codigo:"",email:{},mails:[],mails2:[],datos:[],persona:{}}},mounted(){void 0==this.cedula&&""!=this.cedula||(this.codigo=this.cedula,this.buscar())},methods:{buscar(){if(""==this.codigo)return!1;this.$q.loading.show(),this.$axios.post("https://electricab.gamo.cf/api/consultaReclamo/"+this.codigo).then((t=>{console.log(t.data),this.datos=t.data,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),console.error(t.response.data.message)}))},filterFn(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.mails=this.mails2.filter((t=>t.label.toLowerCase().indexOf(e)>-1))}:()=>{this.mails=this.mails2})}}},ge=be,fe=Object(f["a"])(ge,me,he,!1,null,null,null),ve=fe.exports;at()(fe,"components",{QLayout:ie["a"],QHeader:se["a"],QToolbar:ne["a"],QToolbarTitle:le["a"],QImg:re["a"],QPageContainer:ce["a"],QPage:j["a"],QForm:K["a"],QInput:H["a"],QBtn:Y["a"],QBanner:de["a"],QTable:V["a"],QTd:G["a"],QBadge:ct["a"]});var qe=function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"lHh Lpr lFf"}},[e("q-header",{attrs:{elevated:""}},[e("q-toolbar",[e("q-toolbar-title",[e("q-img",{staticStyle:{width:"30px"},attrs:{src:"logo.png"}})],1),e("div")],1)],1),e("q-page-container",[e("q-page",[e("div",{staticClass:"row",style:t.backgroundDiv},[e("div",{staticClass:"q-pa-md col-md-6 col-xs-12"},[e("div",{staticStyle:{width:"100%"}},[e("q-btn",{staticClass:"text-h6",attrs:{color:"green"},on:{click:function(e){return t.$router.replace({path:"/consulta"})}}},[t._v("IR CONSULTA RECLAMOS")])],1),e("div",{staticClass:"q-pa-xs"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",outlined:"",rounded:"",label:"Cedula de Identidad *"},on:{change:t.buscar},model:{value:t.persona.ci,callback:function(e){t.$set(t.persona,"ci",e)},expression:"persona.ci"}})],1),e("div",{staticClass:"q-pa-xs"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",outlined:"",rounded:"",type:"text",label:"Nombre Completo *"},model:{value:t.persona.nombre,callback:function(e){t.$set(t.persona,"nombre",e)},expression:"persona.nombre"}})],1),e("div",{staticClass:"q-pa-xs"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",outlined:"",rounded:"",type:"text",label:"Celular *"},model:{value:t.persona.telefono,callback:function(e){t.$set(t.persona,"telefono",e)},expression:"persona.telefono"}})],1),e("div",{staticClass:"q-pa-xs"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",outlined:"",rounded:"",type:"textarea",label:"Detalle de Reclamo *"},model:{value:t.reclamo,callback:function(e){t.reclamo=e},expression:"reclamo"}})],1),e("div",{staticClass:"q-pa-xs row"},[e("div",{staticClass:"col-10"},[e("q-input",{attrs:{"bg-color":"blue-grey-1",dense:"",outlined:"",rounded:"",type:"text",label:"Nro Poste"},model:{value:t.nposte,callback:function(e){t.nposte=e},expression:"nposte"}})],1),e("q-btn",{attrs:{color:"green",icon:"search"},on:{click:t.buscarPoste}})],1),e("div",{staticClass:"q-pa-xs"},[e("q-btn",{attrs:{color:"green-8",label:"REGISTRAR"},on:{click:t.registrarReclamo}})],1)]),e("div",{staticClass:"q-pa-md col-md-6 col-xs-12"},[e("div",{staticStyle:{color:"white","font-weight":"bold",background:"gray","font-size":"10px"}},[t._v(" * Puede arrastrar su ubicacion o hacer click en cualquier parte del mapa")]),e("div",{staticStyle:{color:"white","font-weight":"bold",background:"gray","font-size":"10px"}},[t._v(" * Hacer click al punto de su ubicacion para cargar los postes cercanos")]),e("div",{staticStyle:{color:"white","font-weight":"bold",background:"gray","font-size":"10px"}},[t._v(" * Click sobre alguno de los postes para registrar su reclamo")]),e("br"),e("l-map",{staticStyle:{height:"70vh"},attrs:{zoom:t.zoom,center:t.center},on:{click:t.cargarpunto}},[e("l-tile-layer",{attrs:{url:t.styleMap?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap",attribution:t.attribution}}),e("l-marker",{attrs:{"lat-lng":[t.lat,t.lng],draggable:"",title:"Usted esta Aqui"},on:{moveend:t.updateCoordinates,click:t.cargarUbicacion}},[e("l-icon",{attrs:{"icon-url":"http://maps.google.com/mapfiles/ms/icons/ylw-pushpin.png"}})],1),t._l(t.datos,(function(a){return e("l-marker",{key:a.id,attrs:{"lat-lng":[a.lat,a.lng]},on:{click:function(e){t.center=[a.lat,a.lng],t.punto=a,t.seleccionar()}}},[e("l-icon",{attrs:{"icon-url":"http://maps.google.com/mapfiles/ms/icons/red-dot.png"}})],1)})),e("l-control",{attrs:{position:"topright"}},[e("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"map",dense:"",round:""},on:{click:function(e){t.styleMap=!t.styleMap}}})],1)],2)],1)]),e("div",{staticClass:"col-12 q-pa-xs"},[e("q-table",{attrs:{data:t.lista,columns:t.colmlist,dense:"","row-key":"name"},scopedSlots:t._u([{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{color:"red",icon:"delete",size:"xs",round:""},on:{click:function(e){return t.delreclamo(a)}}})],1)]}}])})],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.agregar,callback:function(e){t.agregar=e},expression:"agregar"}},[e("q-card",{staticStyle:{width:"300px"}},[e("q-card-section",{staticClass:"row items-center"},[e("span",{staticClass:"q-ml-sm"},[t._v("AGREGAR A LISTA RECLAMO")])]),e("q-card-section",[e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("MATERIAL :")]),t._v(" "+t._s(t.punto.material))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("LUMINARIA :")]),t._v(" "+t._s(t.punto.luminaria))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("ALTURA :")]),t._v(" "+t._s(t.punto.altura))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("POTENCIA :")]),t._v(" "+t._s(t.punto.potencia))]),e("div",{staticClass:"col-12"},[e("b",[t._v("OBSERVACION : ")]),t._v(t._s(t.punto.observacion))])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"CANCEL",color:"red"}}),e("q-btn",{attrs:{flat:"",label:"AGREGAR",color:"green"},on:{click:t.addPunto}})],1)],1)],1),e("q-dialog",{attrs:{"full-width":""},model:{value:t.dialogReclamo,callback:function(e){t.dialogReclamo=e},expression:"dialogReclamo"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Datos de Alumbrado "+t._s(t.punto.nroposte))]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("MATERIAL :")]),t._v(" "+t._s(t.punto.material))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("LUMINARIA :")]),t._v(" "+t._s(t.punto.luminaria))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("ALTURA :")]),t._v(" "+t._s(t.punto.altura))]),e("div",{staticClass:"col-md-3 col-xs-12"},[e("b",[t._v("POTENCIA :")]),t._v(" "+t._s(t.punto.potencia))]),e("div",{staticClass:"col-12"},[e("b",[t._v("OBSERVACION : ")]),t._v(t._s(t.punto.observacion))])])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Detalle del reclamo",type:"textarea"},model:{value:t.denuncia.reclamo,callback:function(e){t.$set(t.denuncia,"reclamo",e)},expression:"denuncia.reclamo"}})],1),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"red",icon:"cancel"}}),e("q-btn",{attrs:{flat:"",label:"Registrar",color:"green",icon:"send"},on:{click:t.registrarReclamo}})],1)],1)],1)],1),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})],1)],1)},Ce=[];const xe=a("d055");var ye={name:"PageIndex",data(){return{styleMap:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',colmlist:[{label:"OPC",field:"opcion",name:"opcion"},{label:"NRO",field:"nroposte",name:"nroposte"},{label:"LUMINARIA",field:"luminaria",name:"luminaria"},{label:"POTENCIA",field:"potencia",name:"potencia"},{label:"MATERIAL",field:"material",name:"material"}],persona:{},agregar:!1,punto:{},denuncia:{},reclamo:"",lista:[],nposte:"",dialogReclamo:!1,zoom:16,marker:{},postes:[],urlbase:"https://electrica.gamo.cf/#/consulta",lat:0,lng:0,datos:[],ubicacion:{lat:-17.97031,lng:-67.11178},center:{lat:-17.97031,lng:-67.11178},backgroundDiv:{backgroundImage:"url(bg.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"},opts:{errorCorrectionLevel:"M",type:"png",quality:.95,width:100,margin:1,color:{dark:"#000000",light:"#FFF"}},opts2:{errorCorrectionLevel:"M",type:"png",quality:.95,width:50,margin:1,color:{dark:"#000000",light:"#FFF"}}}},mounted(){this.geolocate()},methods:{cargarpunto(t){console.log(t.latlng),this.lat=t.latlng.lat,this.lng=t.latlng.lng,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion},delreclamo(t){console.log(t),this.lista.splice(t.rowIndex,1)},addPunto(){this.lista.find((t=>t.id==this.punto.id))||this.lista.push(this.punto),this.agregar=!1},async printReclamo(t){this.qrImage=await xe.toDataURL(this.urlbase+"/"+t.persona.ci,this.opts);let e="<style>      .titulo{      font-size: 10px;      text-align: center;      font-weight: bold;      }      .titulo2{      font-size: 10px;      font-weight: bold;      text-align: center;      }            .titulo3{      font-size: 9px;      text-align: center;      width:70%;      }            .contenido{      font-size: 10px;      text-align: left;      }      .conte2{      font-size: 9px;      text-align: right;      }      .campotd{      text-align: center;      }      .titder{      font-size: 10px;      text-align: right;      font-weight: bold;      }      hr{  border-top: 1px dashed   ;}  table{    width:100%  }  h1 {    color: black;    font-family: sans-serif;  }</style>    <div id='myelement' style='background-image:url(logo3.png);background-repeat: no-repeat; background-size: 30px 60px;'>      <div class='titulo2' >        GOBIERNO AUTONOMO MUNICIPAL DE ORURO<br>        UNIDAD DE ALUMBRADO PUBLICO <br>Y SERVICIOS ELECTRICOS<br>        Reclamo Nro: "+t.id+"<br>        Oruro      </div>      <hr>      <table>        <tr><td class='titder'>FECHA REGISTRO:</td><td class='contenido'>"+t.fecha+"</td></tr>        <tr><td class='titder'>CI:</td><td class='contenido'>"+t.persona.ci+"</td></tr>        <tr><td class='titder'>NOMBRE:</td><td class='contenido'>"+t.persona.nombre+"</td></tr>        <tr><td class='titder'>TELEFONO:</td><td class='contenido'>"+t.persona.telefono+"</td></tr>      </table>       <hr>      <div class='titulo'>DETALLE RECLAMO</div>      <div  class='contenido'>"+t.reclamo+"</div>      <div style='display: flex;justify-content: center;'>  <img src="+this.qrImage+" >      </div>      </div>            ";document.getElementById("myelement").innerHTML=e;const a=new z["Printd"];a.print(document.getElementById("myelement"))},handleMarkerDrag(t){this.ubicacion={lat:t.latLng.lat(),lng:t.latLng.lng()}},cargarUbicacion(){this.$axios.post("calcularArea",{lat:this.lat,lng:this.lng,distancia:200}).then((t=>{console.log(t.data),this.datos=t.data}))},updateCoordinates(t){this.lat=t.target._latlng.lat,this.lng=t.target._latlng.lng,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion},registrarReclamo(){return void 0==this.reclamo||""==this.reclamo?(this.$q.notify({message:"Ingrese su Reclamo",color:"red",icon:"info"}),!1):void 0==this.persona.ci||""==this.persona.ci||void 0==this.persona.nombre||""==this.persona.nombre||void 0==this.persona.telefono||""==this.persona.telefono?(this.$q.notify({message:"Registre sus datos",color:"red",icon:"info"}),!1):(void 0==this.persona.id&&(this.persona.id=""),this.denuncia.persona=this.persona,this.denuncia.fecha=P["a"].formatDate(new Date,"YYYY-MM-DD"),this.denuncia.hora=P["a"].formatDate(new Date,"HH:mm"),this.denuncia.listado=this.lista,this.denuncia.reclamo=this.reclamo,this.$axios.post("registroMultiple",this.denuncia).then((t=>{console.log(t.data),this.dialogReclamo=!1,this.$q.notify({message:"Su Reclamo fue Registrado",color:"green",icon:"info"})})),this.reclamo="",this.persona={},this.denuncia={},void(this.nposte=""))},seleccionar(){if(void 0==this.persona.ci||void 0==this.persona.nombre||void 0==this.persona.telefono)return this.$q.notify({message:"Ingrese su Datos",color:"red",icon:"info"}),!1;this.zoom=19,this.agregar=!0},cargar(t){switch(this.$q.loading.show(),t){case"D1":this.datos=this.d1;break;case"D2":this.datos=this.d2;break;case"D3":this.datos=this.d3;break;case"D4":this.datos=this.d4;break;case"D5":this.datos=this.d5;break;default:this.datos=[];break}this.$q.loading.hide()},buscarPoste(){this.datos=[],this.$axios.get("buscarPoste/"+this.nposte).then((t=>{t.data.length>0&&(this.datos.push(t.data[0]),this.ubicacion=[t.data[0].lat,t.data[0].lng],this.center=this.ubicacion,this.zoom=18)}))},buscar(){let t=this.persona.ci;this.$axios.post("buscarPersona/"+t).then((e=>{console.log(e.data),e.data?this.persona=e.data:(this.persona={},this.persona.ci=t)}))},async geolocate(){this.ubicacion=[0,0],navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{console.log(t),this.lat=t.coords.latitude,this.lng=t.coords.longitude,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion,this.zoom=18,this.$axios.post("calcularArea",{lat:this.lat,lng:this.lng,distancia:200}).then((t=>{console.log(t.data),this.datos=t.data}))}),(function(t){switch(t.code){case t.PERMISSION_DENIED:console.log("El usuario denegó el permiso para la Geolocalización");break;case t.POSITION_UNAVAILABLE:console.log("La ubicación no está disponible.");break;case t.TIMEOUT:console.log("Se ha excedido el tiempo para obtener la ubicación");break;case t.UNKNOWN_ERROR:console.log(" Un error desconocido.");break}}))}}},_e=ye,ke=Object(f["a"])(_e,qe,Ce,!1,null,null,null),we=ke.exports;at()(ke,"components",{QLayout:ie["a"],QHeader:se["a"],QToolbar:ne["a"],QToolbarTitle:le["a"],QImg:re["a"],QPageContainer:ce["a"],QPage:j["a"],QBanner:de["a"],QBtn:Y["a"],QInput:H["a"],QTable:V["a"],QTd:G["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QCardActions:ut["a"]}),at()(ke,"directives",{ClosePopup:pt["a"]});var Oe=function(){var t=this,e=t._self._c;return e("q-page",[e("div",{staticClass:"col-12"},[e("l-map",{staticStyle:{height:"50vh"},attrs:{zoom:t.zoom,center:t.center}},[e("l-tile-layer",{attrs:{url:t.styleMap?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap",attribution:t.attribution}}),t._l(t.puntos,(function(a){return e("l-marker",{key:a.id,attrs:{"lat-lng":[a.lat,a.lng]},on:{click:function(e){t.center=[a.lat,a.lng],t.punto=a,t.frmmodalpunto(a)}}},[e("l-icon",{attrs:{"icon-url":"http://maps.google.com/mapfiles/ms/icons/red-dot.png"}})],1)})),e("l-control",{attrs:{position:"topright"}},[e("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"map",dense:"",round:""},on:{click:function(e){t.styleMap=!t.styleMap}}})],1)],2)],1),e("q-table",{attrs:{data:t.puntos,columns:t.colums,filter:t.filter},scopedSlots:t._u([{key:"body-cell-nombre",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n          "+t._s(a.row.persona.nombre)+" - "+t._s(a.row.persona.telefono)+"\n        ")])]}},{key:"body-cell-nroposte",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n          "+t._s(a.row.poste.nroposte)+"\n        ")])]}},{key:"body-cell-ubicacion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"ACTIVO"==a.row.estado?"primary":"negative",icon:"place",size:"xs"},on:{click:function(e){return t.clickclientes(a.row)}}}),e("q-btn",{attrs:{color:"info",icon:"print",dense:""},on:{click:function(e){return t.printReclamo(a.row)}}})],1)]}},{key:"top-right",fn:function(){return[e("q-btn",{attrs:{icon:"refresh",color:"info"},on:{click:t.mispuntos}}),e("q-btn",{attrs:{icon:"adjust",color:"negative"},on:{click:t.centro}}),e("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0}])}),e("q-dialog",{attrs:{"full-width":""},model:{value:t.modalpunto,callback:function(e){t.modalpunto=e},expression:"modalpunto"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Nro poste "+t._s(t.poste.nroposte)+" lat:"+t._s(t.poste.lat)+" lng:"+t._s(t.poste.lng))])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-form",{on:{submit:t.regmatto}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 col-md-6"},[e("b",[t._v("Nombre: ")]),t._v(t._s(t.persona.nombre)+"\n              ")]),e("div",{staticClass:"col-xs-12 col-md-3"},[e("b",[t._v("CI: ")]),t._v(" "+t._s(t.persona.ci)+"\n              ")]),e("div",{staticClass:"col-xs-12 col-md-3"},[e("b",[t._v("Telefono: ")]),t._v(t._s(t.persona.telefono)+"\n              ")]),e("div",{staticClass:"col-xs-9"},[e("b",[t._v("Reclamo: ")]),t._v(t._s(t.punto.reclamo)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Fecha Hora:")]),t._v(" "+t._s(t.punto.fecha)+" "+t._s(t.punto.hora)+"\n              ")])]),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Luminaria: ")]),t._v(" "+t._s(t.poste.luminaria)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Material: ")]),t._v(t._s(t.poste.material)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Altura: ")]),t._v(t._s(t.poste.altura)+"\n              ")]),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Potencia: ")]),t._v(t._s(t.poste.potencia)+"\n              ")]),e("div",{staticClass:"col-md-12"},[e("b",[t._v("Observacion: ")]),t._v(t._s(t.poste.observacion)+"\n              ")])]),e("div",{staticClass:"col-12 flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{label:"Generar Ruta",color:"primary",icon:"map",type:"a",target:"_blank",href:"https://www.google.com.bo/maps/place/"+t.poste.lat+","+t.poste.lng+"/@"+t.poste.lat+","+t.poste.lng+",17z/data=!3m1!4b1!4m6!3m5!1s0x0:0xeda9371aeb8c1574!7e2!8m2!3d-17.981432!4d-67.1061122?hl=es"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{required:"",dense:"",outlined:"",type:"textarea",label:"Actividad"},model:{value:t.punto.actividad,callback:function(e){t.$set(t.punto,"actividad",e)},expression:"punto.actividad"}})],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-select",{attrs:{dense:"",options:t.listMaterial,label:"Materiales",outlined:""},on:{input:function(e){return t.buscar()}},model:{value:t.material,callback:function(e){t.material=e},expression:"material"}})],1),e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-select",{attrs:{dense:"",options:t.codigos,label:"Codigo",outlined:""},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),e("div",{staticClass:"col-md-3 col-xs-6"},[e("b",[t._v("Disponible:")]),t._v(t._s(t.codigo.saldo)+"\n                ")]),e("div",{staticClass:"col-md-2 col-xs-4"},[e("q-input",{attrs:{type:"number",label:"Cantidad",required:"",outlined:"",dense:""},model:{value:t.cantidad,callback:function(e){t.cantidad=e},expression:"cantidad"}})],1),e("div",{staticClass:"col-md-1 col-xs-2 q-pa-xs"},[e("q-btn",{attrs:{color:"green",icon:"add_circle",dense:""},on:{click:t.agregar}})],1),e("div",{staticClass:"col-12"},[e("q-table",{attrs:{title:"DETALLE",data:t.detalle,columns:t.coldetalle,"row-key":"name",dense:""},scopedSlots:t._u([{key:"body-cell-opcion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"red",icon:"delete",size:"xs",round:""},on:{click:function(e){return t.delDetalle(a.rowIndex)}}})],1)]}}])})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"date",label:"Fecha Man"},model:{value:t.punto.fechaman,callback:function(e){t.$set(t.punto,"fechaman",e)},expression:"punto.fechaman"}})],1),e("div",{staticClass:"col-md-6 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",type:"time",label:"Hora Man"},model:{value:t.punto.horaman,callback:function(e){t.$set(t.punto,"horaman",e)},expression:"punto.horaman"}})],1),e("div",{staticClass:"col-12 flex flex-center"},[e("q-btn",{staticClass:"full-width",attrs:{type:"submit",label:"Realizar mantenimiento",color:"positive",icon:"construction"}})],1)])])],1)],1)],1),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})],1)},Ae=[];const De=a("d055");var Ee={data(){return{modalpunto:!1,styleMap:!0,detalle:[],material:{},codigo:{},codigos:[],fechaplan:P["a"].formatDate(new Date,"YYYY-MM-DD"),filter:"",url:"https://electrica.gamo.cf/#/consulta",poste:{},persona:{},qrImage2:"",cantidad:1,qrImage:"",colums:[{name:"nroposte",label:"nroposte",field:"nroposte"},{name:"nombre",label:"nombre",field:"nombre"},{name:"ubicacion",label:"ubicacion",field:"ubicacion"}],coldetalle:[{label:"OP",field:"opcion",name:"opcion"},{label:"MATERIAL",field:"material",name:"material"},{label:"CODIGO",field:t=>t.inventario.codigo,name:"codigo"},{label:"CANT",field:"uso",name:"uso"}],puntos:[],puntostabla:[],listMaterial:[],punto:{},attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:13,center:{lat:-17.97031,lng:-67.11178},markerLatLng:[-17.97031,-67.11178],opts:{errorCorrectionLevel:"M",type:"png",quality:.95,width:100,margin:1,color:{dark:"#000000",light:"#FFF"}},opts2:{errorCorrectionLevel:"M",type:"png",quality:.95,width:50,margin:1,color:{dark:"#000000",light:"#FFF"}}}},created(){this.mispuntos(),this.cargarMaterial()},methods:{regmatto(){this.$axios.post("reclamofin",{punto:this.punto,detalle:this.detalle}).then((t=>{console.log(t.data),this.modalpunto=!1,this.mispuntos(),this.cargarMaterial()}))},delDetalle(t){this.detalle.splice(t,1),this.llenarActividad},agregar(){if(void 0==this.cantidad||""==this.cantidad||this.cantidad<=0)return this.cantidad=1,!1;this.cantidad>this.codigo.saldo&&(this.cantidad=this.codigo.saldo),this.detalle.find((t=>t.id===this.codigo.id))||(this.codigo.uso=this.cantidad,this.detalle.push(this.codigo),this.llenarActividad())},llenarActividad(){let t="Cambio o instalacion materiales: ";0==this.detalle.length&&(t=""),this.detalle.forEach((e=>{t+=" "+e.material+" Cod: "+e.inventario.codigo+", "})),this.punto.actividad=t},buscar(){this.codigos=this.material.lista,this.codigo=this.material.lista[0],this.cantidad=1},cargarMaterial(){this.$axios.post("disponible").then((t=>{t.data.forEach((t=>{t.label=t.inventario.codigo;let e=this.listMaterial.find((e=>e.id===t.material_id));e?e.lista.push(t):this.listMaterial.push({id:t.material_id,label:t.material,lista:[t]})})),console.log(this.listMaterial),this.listMaterial.length>0?(this.material=this.listMaterial[0],this.codigo=this.material.lista[0],this.codigos=this.material.lista,this.cantidad=1):(this.material={label:""},this.codigo={label:""},this.cantidad=0)}))},async printReclamo(t){this.qrImage2=await De.toDataURL(""+t.persona.ci,this.opts2),this.qrImage=await De.toDataURL(this.url+"/"+t.persona.ci,this.opts);let e="<style>      .titulo{      font-size: 10px;      text-align: center;      font-weight: bold;      }      .titulo2{      font-size: 10px;      font-weight: bold;      text-align: center;      }            .titulo3{      font-size: 9px;      text-align: center;      width:70%;      }            .contenido{      font-size: 9px;      text-align: left;      }      .conte2{      font-size: 9px;      text-align: right;      }      .campotd{      text-align: center;      }      .titder{      font-size: 10px;      text-align: right;      font-weight: bold;      }      hr{  border-top: 1px dashed   ;}  table{    width:100%  }  h1 {    color: black;    font-family: sans-serif;  }</style>    <div id='myelement' style='background-image:url(logo3.png);background-repeat: no-repeat; background-size: 30px 60px;'>      <div class='titulo2' >        GOBIERNO AUTONOMO MUNICIPAL DE ORURO<br>        UNIDAD DE ALUMBRADO PUBLICO <br>Y SERVICIOS ELECTRICOS<br>        Reclamo Nro: "+t.id+"<br>        Oruro      </div>      <hr>      <table><tr><td>      <table>        <tr><td class='titder'>FECHA REGISTRO:</td><td class='contenido'>"+t.fecha+"</td></tr>        <tr><td class='titder'>CI:</td><td class='contenido'>"+t.persona.ci+"</td></tr>        <tr><td class='titder'>NOMBRE:</td><td class='contenido'>"+t.persona.nombre+"</td></tr>        <tr><td class='titder'>TELEFONO:</td><td class='contenido'>"+t.persona.telefono+"</td></tr>      </table></<td>       <td>        <div style='display: flex;justify-content: center;'>        <img src="+this.qrImage2+" >        </div>      </td></tr></table>      <hr>      <div class='titulo'>DETALLE RECLAMO</div>      <div  class='contenido'>"+t.reclamo+"</div>      <div style='display: flex;justify-content: center;'>  <img src="+this.qrImage+" >      </div>      </div>            ";document.getElementById("myelement").innerHTML=e;const a=new z["Printd"];a.print(document.getElementById("myelement"))},regActividad(){this.punto.actividad="",""!=this.punto.l70&&void 0!=this.punto.l70&&null!=this.punto.l70&&(this.punto.actividad+="LAMPARA 70W COD "+this.punto.l70+","),""!=this.punto.l150&&void 0!=this.punto.l150&&null!=this.punto.l150&&(this.punto.actividad+="LAMPARA 150W COD "+this.punto.l150+","),""!=this.punto.l250&&void 0!=this.punto.l250&&null!=this.punto.l250&&(this.punto.actividad+="LAMPARA 250W COD "+this.punto.l250+","),""!=this.punto.r70&&void 0!=this.punto.r70&&null!=this.punto.r70&&(this.punto.actividad+=" REACTOR 70W COD "+this.punto.r70+","),""!=this.punto.r150&&void 0!=this.punto.r150&&null!=this.punto.r150&&(this.punto.actividad+=" REACTOR 150W COD "+this.punto.r150+","),""!=this.punto.r250&&void 0!=this.punto.r250&&null!=this.punto.r250&&(this.punto.actividad+=" REACTOR 250W COD "+this.punto.r250+","),""!=this.punto.foto&&void 0!=this.punto.foto&&null!=this.punto.foto&&(this.punto.actividad+=" FOTOCELULA FOTO  "+this.punto.foto+","),""!=this.punto.base&&void 0!=this.punto.base&&null!=this.punto.base&&(this.punto.actividad+=" FOTOCELULA BASE  "+this.punto.base+","),""!=this.punto.ignitor&&void 0!=this.punto.ignitor&&null!=this.punto.ignitor&&(this.punto.actividad+=" IGNITOR COD "+this.punto.ignitor+","),""!=this.punto.cable&&void 0!=this.punto.cable&&null!=this.punto.cable&&(this.punto.actividad+=" CABLE M/L "+this.punto.cable+","),""!=this.punto.contactor&&void 0!=this.punto.contactor&&null!=this.punto.contactor&&"NO"!=this.punto.contactor&&(this.punto.actividad+=" SI CONTACTOR,"),""!=this.punto.termico&&void 0!=this.punto.termico&&null!=this.punto.termico&&"NO"!=this.punto.termico&&(this.punto.actividad+=" SI TERMICO,"),""!=this.punto.soquet&&void 0!=this.punto.soquet&&null!=this.punto.soquet&&(this.punto.actividad+=" soquet COD "+this.punto.soquet+",")},updatedenuncia(){this.$q.loading.show(),this.punto.supervisor=this.$store.state.login.user.name,this.punto.estado="ATENDIDO",void 0!=this.fechaplan&&""!=this.fechaplan&&(this.punto.fechaplan=this.fechaplan),this.modalpunto=!1,this.$axios.put("reclamo/"+this.punto.id,this.punto).then((t=>{console.log(t.data),this.mispuntos(),this.fechaplan=P["a"].formatDate(new Date,"YYYY-MM-DD")}))},frmmodalpunto(t){console.log(t),this.modalpunto=!0,this.punto=t,this.detalle=[],this.persona=t.persona,this.poste=t.poste},clickclientes(t){this.center={lat:t.lat,lng:t.lng},this.zoom=18},centro(){this.center=[-17.97031,-67.11178],this.zoom=13},mispuntos(){this.$q.loading.show(),this.$axios.get("listAtencion").then((t=>{console.log(t.data),this.puntos=[],t.data.forEach((t=>{null==t.poste.nroposte&&(t.poste.nroposte=""),t.lat=t.poste.lat,t.lng=t.poste.lng,t.fechaman=P["a"].formatDate(new Date,"YYYY-MM-DD"),t.horaman=P["a"].formatDate(new Date,"HH:mm"),this.puntos.push(t)})),this.$q.loading.hide(),console.log(this.puntos)}))}}},Ie=Ee,Re=Object(f["a"])(Ie,Oe,Ae,!1,null,null,null),$e=Re.exports;at()(Re,"components",{QPage:j["a"],QBtn:Y["a"],QTable:V["a"],QTd:G["a"],QInput:H["a"],QIcon:Z["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QForm:K["a"],QSelect:tt["a"]});var Se=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-btn",{staticClass:"q-mb-xs",attrs:{label:"Nuevo usuario",color:"positive",icon:"add_circle"},on:{click:function(e){t.alert=!0}}}),e("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"50%"}},[e("q-card-section",{staticClass:"bg-green-14 text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"add_circle"}}),t._v(" REGISTRO DE NUEVO USUARIO")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("q-input",{attrs:{filled:"",type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.name,callback:function(e){t.$set(t.dato,"name",e)},expression:"dato.name"}}),e("q-input",{attrs:{filled:"",type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.email,callback:function(e){t.$set(t.dato,"email",e)},expression:"dato.email"}}),e("q-input",{attrs:{filled:"",type:"password",label:"Contraseña",hint:"Contraseña","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.password,callback:function(e){t.$set(t.dato,"password",e)},expression:"dato.password"}})],1),e("div",{staticClass:"col-6"},[e("div",{staticClass:"text-5"},[t._v("Permisos")]),t._l(t.permisos,(function(a,o){return e("q-checkbox",{key:o,staticStyle:{width:"100%"},attrs:{label:a.nombre},model:{value:a.estado,callback:function(e){t.$set(a,"estado",e)},expression:"permiso.estado"}})}))],2)]),e("div",[e("q-btn",{attrs:{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)])],1)],1)],1),e("q-table",{attrs:{filter:t.filter,title:"REGISTRO DE USUARIOS",data:t.data,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100]},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"name",attrs:{props:a}},[t._v("\n          "+t._s(a.row.name)+"\n        ")]),e("q-td",{key:"email",attrs:{props:a}},[t._v("\n          "+t._s(a.row.email)+"\n        ")]),e("q-td",{key:"permisos",attrs:{props:a}},[e("ul",t._l(a.row.permisos,(function(a,o){return e("li",{key:o},[t._v(t._s(a.nombre))])})),0)]),e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"yellow",icon:"edit"},on:{click:function(e){return t.editRow(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"positive",icon:"vpn_key"},on:{click:function(e){return t.cambiopass(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"green-10",icon:"post_add"},on:{click:function(e){return t.mispermisos(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteRow(a)}}})],1)],1)]}}])}),e("q-dialog",{model:{value:t.dialog_mod,callback:function(e){t.dialog_mod=e},expression:"dialog_mod"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"50%"}},[e("q-card-section",{staticClass:"bg-warning text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"edit"}}),t._v(" MODIFICAR DATOS DE USUARIO")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onMod}},[e("q-input",{attrs:{filled:"",type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.name,callback:function(e){t.$set(t.dato2,"name",e)},expression:"dato2.name"}}),e("q-input",{attrs:{filled:"",type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[t=>t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.email,callback:function(e){t.$set(t.dato2,"email",e)},expression:"dato2.email"}}),e("div",[e("q-btn",{attrs:{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-dialog",{model:{value:t.dialog_del,callback:function(e){t.dialog_del=e},expression:"dialog_del"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"clear",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("Seguro de eliminar Registro.")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Eliminar",color:"deep-orange"},on:{click:t.onDel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1),e("q-dialog",{model:{value:t.modelpermiso,callback:function(e){t.modelpermiso=e},expression:"modelpermiso"}},[e("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[e("q-card-section",{staticClass:"bg-info"},[e("div",{staticClass:"text-h7 text-white"},[e("q-icon",{attrs:{name:"folder"}}),t._v(" PERMISOS DE ACCESO")],1)]),e("q-card-section",[e("q-form",{on:{submit:function(e){return e.preventDefault(),t.updatepermisos.apply(null,arguments)}}},[t._l(t.permisos2,(function(a,o){return e("q-checkbox",{key:o,staticStyle:{width:"100%"},attrs:{label:a.nombre},model:{value:a.estado,callback:function(e){t.$set(a,"estado",e)},expression:"permiso.estado"}})})),e("q-btn",{attrs:{type:"submit",color:"info",icon:"send",label:"Actualizar"}})],2)],1)],1)],1)],1)},Te=[];const{addToDate:Ne}=P["a"];var Me={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{},model:"",dato2:{},options:[],props:[],unidades:[],permisos:[],permisos2:[],modelpermiso:!1,uni:{},columns:[{name:"name",align:"left",label:"NOMBRE ",field:"name",sortable:!0},{name:"email",align:"left",label:"E-MAIL",field:"email",sortable:!0},{name:"permisos",align:"left",label:"PERMISOS",field:"permisos",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"action",sortable:!1}],data:[]}},created(){this.$store.state.login.boolusuario||this.$router.replace({path:"/home"}),this.misdatos(),this.$axios.get("permiso").then((t=>{t.data.forEach((t=>{this.permisos.push({id:t.id,nombre:t.nombre,estado:!1}),this.permisos2.push({id:t.id,nombre:t.nombre,estado:!1})}))}))},methods:{updatepermisos(){this.$axios.put("updatepermisos/"+this.dato2.id,{permisos:this.permisos2}).then((t=>{this.modelpermiso=!1,this.misdatos()})).catch((t=>{this.$q.notify({message:t.response.data.message,icon:"close",color:"red"})}))},mispermisos(t){let e;this.modelpermiso=!0,this.dato2=t.row,this.permisos2.forEach((t=>{e=this.dato2.permisos.find((e=>e.pivot.permiso_id==t.id)),t.estado=void 0!=e}))},misdatos(){this.$q.loading.show(),this.$axios.get("user").then((t=>{console.log(t.data),this.data=t.data,this.$q.loading.hide()}))},editRow(t){this.dato2=t.row,this.dato2.unid_id=t.row.unid,this.dialog_mod=!0},deleteRow(t){this.dato2=t.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("user",{name:this.dato.name,password:this.dato.password,email:this.dato.email,permisos:this.permisos}).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={},this.alert=!1,this.misdatos()})).catch((t=>{console.log(t.response.data),this.$q.notify({message:t.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("user/"+this.dato2.id,{name:this.dato2.name,email:this.dato2.email}).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("user/"+this.dato2.id).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato.nombre=null,this.dato.inicio=0,this.dato.fin=0},cambiopass(t){this.$q.dialog({title:"CAMBIAR PASSWORD",message:"Ingresar nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((e=>{this.$q.loading.show(),this.$axios.put("updatePassword/"+t.row.id,{password:e}).then((t=>{this.$q.loading.hide()}))})).onCancel((()=>{})).onDismiss((()=>{}))}}},Le=Me,Qe=a("8f8e"),Pe=a("bd08"),ze=a("cb32"),Ue=Object(f["a"])(Le,Se,Te,!1,null,null,null),Fe=Ue.exports;at()(Ue,"components",{QBtn:Y["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QIcon:Z["a"],QForm:K["a"],QInput:H["a"],QCheckbox:Qe["a"],QTable:V["a"],QTr:Pe["a"],QTd:G["a"],QAvatar:ze["a"],QCardActions:ut["a"]}),at()(Ue,"directives",{ClosePopup:pt["a"]});var Be=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-btn",{staticClass:"q-mb-xs",attrs:{label:"Nuevo Tecnico",color:"positive",icon:"add_circle"},on:{click:function(e){t.alert=!0}}}),e("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"70%"}},[e("q-card-section",{staticClass:"bg-green-14 text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"add_circle"}}),t._v(" REGISTRO DE NUEVO TECNICO")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[e("q-input",{attrs:{filled:"",type:"text",label:"CI ",hint:"Ingresar ci","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.ci,callback:function(e){t.$set(t.dato,"ci",e)},expression:"dato.ci"}}),e("q-input",{attrs:{filled:"",type:"text",label:"Nombre",hint:"nombre completo","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.nombre,callback:function(e){t.$set(t.dato,"nombre",e)},expression:"dato.nombre"}}),e("q-input",{attrs:{filled:"",label:"Cel / Tel",hint:"numero de contacto"},model:{value:t.dato.telefono,callback:function(e){t.$set(t.dato,"telefono",e)},expression:"dato.telefono"}}),e("div",[e("q-btn",{attrs:{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-table",{attrs:{filter:t.filter,title:"LISTA DE TECNICOS",data:t.data,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100]},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"yellow",icon:"edit"},on:{click:function(e){return t.editRow(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteRow(a)}}})],1)]}}])}),e("q-dialog",{model:{value:t.dialog_mod,callback:function(e){t.dialog_mod=e},expression:"dialog_mod"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"50%"}},[e("q-card-section",{staticClass:"bg-warning text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"edit"}}),t._v(" MODIFICAR DATOS TECNICO")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onMod}},[e("q-input",{attrs:{filled:"",label:"ci ",hint:"Ingresar ci","lazy-rules":"",rules:[t=>t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.ci,callback:function(e){t.$set(t.dato2,"ci",e)},expression:"dato2.ci"}}),e("q-input",{attrs:{filled:"",label:"Nombre",hint:"Nombre","lazy-rules":"",rules:[t=>t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.nombre,callback:function(e){t.$set(t.dato2,"nombre",e)},expression:"dato2.nombre"}}),e("q-input",{attrs:{filled:"",label:"Tel Cel",hint:"Celular"},model:{value:t.dato2.telefono,callback:function(e){t.$set(t.dato2,"telefono",e)},expression:"dato2.telefono"}}),e("div",[e("q-btn",{attrs:{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-dialog",{model:{value:t.dialog_del,callback:function(e){t.dialog_del=e},expression:"dialog_del"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"clear",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("Seguro de eliminar Registro.")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Eliminar",color:"deep-orange"},on:{click:t.onDel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},je=[];const{addToDate:Ye}=P["a"];var Ve={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{},model:"",dato2:{},options:[],props:[],modelpermiso:!1,uni:{},columns:[{name:"ci",align:"left",label:"CI ",field:"ci",sortable:!0},{name:"nombre",align:"left",label:"NOMBRE ",field:"nombre",sortable:!0},{name:"telefono",align:"left",label:"TELEFONO",field:"telefono",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"opcion",sortable:!1}],data:[]}},created(){this.misdatos()},methods:{misdatos(){this.$q.loading.show(),this.$axios.get("tecnico").then((t=>{console.log(t.data),this.data=t.data,this.$q.loading.hide()}))},editRow(t){this.dato2=t.row,this.dialog_mod=!0},deleteRow(t){this.dato2=t.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("tecnico",this.dato).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={},this.alert=!1,this.misdatos()})).catch((t=>{console.log(t.response.data),this.$q.notify({message:t.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("tecnico/"+this.dato2.id,this.dato2).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("tecnico/"+this.dato2.id).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato.nombre="",this.dato.telefono="",this.dato.ci=""}}},Ge=Ve,He=Object(f["a"])(Ge,Be,je,!1,null,null,null),Ze=He.exports;at()(He,"components",{QBtn:Y["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QIcon:Z["a"],QForm:K["a"],QInput:H["a"],QTable:V["a"],QTd:G["a"],QAvatar:ze["a"],QCardActions:ut["a"]}),at()(He,"directives",{ClosePopup:pt["a"]});var We=function(){var t=this,e=t._self._c;return e("q-page",[e("q-dialog",{attrs:{"full-width":""},model:{value:t.dialogRegistro,callback:function(e){t.dialogRegistro=e},expression:"dialogRegistro"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("REGISTRO DE ALUMBRADO ")])]),e("q-form",{on:{submit:function(e){return e.preventDefault(),t.regPoste.apply(null,arguments)}}},[e("q-card-section",{staticClass:"q-pt-none"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"latitud",required:"",type:"number",step:"0.00000000001"},model:{value:t.punto.lat,callback:function(e){t.$set(t.punto,"lat",e)},expression:"punto.lat"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"longitud",required:"",type:"number",step:"0.00000000001"},model:{value:t.punto.lng,callback:function(e){t.$set(t.punto,"lng",e)},expression:"punto.lng"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Nro Poste",required:""},model:{value:t.punto.nroposte,callback:function(e){t.$set(t.punto,"nroposte",e)},expression:"punto.nroposte"}})],1),e("div",{staticClass:"col-3"},[e("q-select",{attrs:{dense:"",outlined:"",label:"Potencia",options:t.potencias},on:{change:function(e){return t.cargarcolor()}},model:{value:t.punto.potencia,callback:function(e){t.$set(t.punto,"potencia",e)},expression:"punto.potencia"}})],1),e("div",{staticClass:"col-3"},[e("q-select",{attrs:{dense:"",outlined:"",label:"Material",options:["Madera","Metalico","Cemento","Empotrado","Ornamental","Cigarro","Riel","Colgado","Otro"]},model:{value:t.punto.material,callback:function(e){t.$set(t.punto,"material",e)},expression:"punto.material"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Luminaria",required:""},model:{value:t.punto.luminaria,callback:function(e){t.$set(t.punto,"luminaria",e)},expression:"punto.luminaria"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Cant Luminarias",type:"number",required:""},model:{value:t.punto.cantidad,callback:function(e){t.$set(t.punto,"cantidad",e)},expression:"punto.cantidad"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Altura",type:"number",required:""},model:{value:t.punto.altura,callback:function(e){t.$set(t.punto,"altura",e)},expression:"punto.altura"}})],1),e("div",{staticClass:"col-3"},[e("q-select",{attrs:{dense:"",outlined:"",label:"Distrito",options:["D1","D2","D3","D4","D5"],required:""},model:{value:t.punto.distrito,callback:function(e){t.$set(t.punto,"distrito",e)},expression:"punto.distrito"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Observacion",required:""},model:{value:t.punto.observacion,callback:function(e){t.$set(t.punto,"observacion",e)},expression:"punto.observacion"}})],1)])]),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Registrar",color:"accent",type:"submit"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cerrar",color:"green"}})],1)],1)],1)],1),e("q-dialog",{attrs:{"full-width":""},model:{value:t.modalpunto,callback:function(e){t.modalpunto=e},expression:"modalpunto"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Nro poste "+t._s(t.punto.nroposte)+" ")])]),e("q-form",{on:{submit:function(e){return e.preventDefault(),t.updatePoste.apply(null,arguments)}}},[e("q-card-section",{staticClass:"q-pt-none"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"latitud",required:"",type:"number",step:"0.000001"},model:{value:t.punto.lat,callback:function(e){t.$set(t.punto,"lat",e)},expression:"punto.lat"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"longitud",required:"",type:"number",step:"0.000001"},model:{value:t.punto.lng,callback:function(e){t.$set(t.punto,"lng",e)},expression:"punto.lng"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Nro Poste",required:""},model:{value:t.punto.nroposte,callback:function(e){t.$set(t.punto,"nroposte",e)},expression:"punto.nroposte"}})],1),e("div",{staticClass:"col-3"},[e("q-select",{attrs:{dense:"",outlined:"",label:"Potencia",options:t.potencias},nativeOn:{change:function(e){return t.cargarcolor.apply(null,arguments)}},model:{value:t.punto.potencia,callback:function(e){t.$set(t.punto,"potencia",e)},expression:"punto.potencia"}})],1),e("div",{staticClass:"col-3"},[e("q-select",{attrs:{dense:"",outlined:"",label:"Material",options:["Madera","Metalico","Cemento","Empotrado","Ornamental","Cigarro","Riel","Colgado","Otro"]},model:{value:t.punto.material,callback:function(e){t.$set(t.punto,"material",e)},expression:"punto.material"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Luminaria",required:""},model:{value:t.punto.luminaria,callback:function(e){t.$set(t.punto,"luminaria",e)},expression:"punto.luminaria"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Cant Luminarias",type:"number",required:""},model:{value:t.punto.cantidad,callback:function(e){t.$set(t.punto,"cantidad",e)},expression:"punto.cantidad"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Altura",type:"number",required:""},model:{value:t.punto.altura,callback:function(e){t.$set(t.punto,"altura",e)},expression:"punto.altura"}})],1),e("div",{staticClass:"col-3"},[e("q-select",{attrs:{dense:"",outlined:"",label:"Distrito",options:["D1","D2","D3","D4","D5"],required:""},model:{value:t.punto.distrito,callback:function(e){t.$set(t.punto,"distrito",e)},expression:"punto.distrito"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Observacion",required:""},model:{value:t.punto.observacion,callback:function(e){t.$set(t.punto,"observacion",e)},expression:"punto.observacion"}})],1)])]),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Actualizar",color:"accent",type:"submit"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cerrar",color:"green"}})],1)],1)],1)],1),e("div",{staticClass:"row col-12"},[e("div",{staticClass:"col-md-3 col-xs-8"},[e("q-select",{attrs:{dense:"",options:t.distritos,label:"Distritos",ourlined:""},model:{value:t.distrito,callback:function(e){t.distrito=e},expression:"distrito"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{color:"green",icon:"search"},on:{click:t.mispuntos}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{color:"teal",icon:"add_circle_outline"},on:{click:function(e){t.punto={},t.dialogRegistro=!0}}})],1),e("div",{staticClass:"col-md-3 col-xs-10"},[e("q-input",{attrs:{dense:"",outlined:"",type:"text",label:"Numero Poste"},model:{value:t.numeroposte,callback:function(e){t.numeroposte=e},expression:"numeroposte"}})],1),e("div",{staticClass:"col-1"},[e("q-btn",{attrs:{color:"info",icon:"place"},on:{click:t.searchPlace}})],1)]),e("div",{staticClass:"col-12"},[e("l-map",{staticStyle:{height:"50vh"},attrs:{zoom:t.zoom,center:t.center},on:{click:t.cargarpunto}},[e("l-tile-layer",{attrs:{url:t.styleMap?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap",attribution:t.attribution}}),e("l-marker",{attrs:{"lat-lng":[t.lat,t.lng],draggable:"",title:"Usted esta Aqui"},on:{moveend:t.updateCoordinates,click:function(e){return t.registropunto()}}},[e("l-icon",{attrs:{"icon-url":"http://maps.google.com/mapfiles/ms/icons/purple-pushpin.png"}})],1),t._l(t.datos,(function(a){return e("l-marker",{key:a.id,attrs:{"lat-lng":[a.lat,a.lng]},on:{click:function(e){t.center=[a.lat,a.lng],t.punto=a,t.modalpunto=!0}}},[e("l-icon",{attrs:{"icon-url":"img/"+a.color}})],1)})),e("l-control",{attrs:{position:"topright"}},[e("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"map",dense:"",round:""},on:{click:function(e){t.styleMap=!t.styleMap}}})],1)],2)],1),e("q-table",{attrs:{data:t.datos,columns:t.colums,filter:t.filter},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-potencia",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n          "+t._s(a.row.potencia)+"\n        ")])]}},{key:"body-cell-nroposte",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n          "+t._s(a.row.nroposte)+"\n        ")])]}},{key:"body-cell-material",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[e("div",{staticClass:"text-subtitle2",staticStyle:{"font-size":"0.8em","white-space":"initial"}},[t._v(t._s(a.row.material))])])]}},{key:"body-cell-observacion",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[e("div",{staticClass:"text-subtitle2",staticStyle:{"font-size":"0.8em","white-space":"initial"}},[t._v(t._s(a.row.observacion))])])]}},{key:"body-cell-ubicacion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"ACTIVO"==a.row.estado?"primary":"negative",icon:"place",size:"xs"},on:{click:function(e){return t.clickclientes(a.row)}}})],1)]}}])})],1)},Xe=[],Je={data(){return{datos:[],numeroposte:"",styleMap:!0,lat:0,lng:0,dialogRegistro:!1,potencia:"",mantenimiento:"",distritos:[{label:"Distrito 1",value:"D1"},{label:"Distrito 1 Ext",value:"D1 EXT"},{label:"Distrito 2",value:"D2"},{label:"Distrito 2 Ext",value:"D2 EXT"},{label:"Distrito 3",value:"D3"},{label:"Distrito 3 Ext",value:"D3 EXT"},{label:"Distrito 4",value:"D4"},{label:"Distrito 4 Ext",value:"D4 EXT"},{label:"Distrito 5",value:"D5"},{label:"Distrito 5 Ext",value:"D5 EXT"}],distrito:{label:"Distrito 1",value:"D1"},modalpunto:!1,kmlLayers:[{url:"colegio.kml"}],postes:[],d1:[],d1e:[],d2:[],d2e:[],d3:[],d3e:[],d4:[],d4e:[],d5:[],d5e:[],colors:[],potencias:["1000w","600w","400w","360w","300w","250w","240w","200w","196w","150w","144w","136w","125w","120w","100w","85w","75w","70w","60w","58w","50w","40w","38w","36w","30w","20w","24w","18w","15w","12w","10w","0"],poten:[{potencia:"1000w",colores:"l1000.png"},{potencia:"600w",colores:"l600.png"},{potencia:"400w",colores:"l400.png"},{potencia:"360w",colores:"l360.png"},{"potenci  a":"300w",colores:"l300.png"},{potencia:"250w",colores:"l250.png"},{potencia:"240w",colores:"l240.png"},{potencia:"200w",colores:"l200.png"},{potencia:"196w",colores:"l196.png"},{potencia:"150w",colores:"l150.png"},{potencia:"144w",colores:"l144.png"},{potencia:"136w",colores:"l136.png"},{potencia:"125w",colores:"l125.png"},{potencia:"120w",colores:"l120.png"},{potencia:"100w",colores:"l100.png"},{potencia:"85w",colores:"l85.png"},{potencia:"75w",colores:"l75.png"},{potencia:"70w",colores:"l70.png"},{potencia:"60w",colores:"l60.png"},{potencia:"58w",colores:"l58.png"},{potencia:"50w",colores:"l50.png"},{potencia:"40w",colores:"l40.png"},{potencia:"38w",colores:"l38.png"},{potencia:"36w",colores:"l36.png"},{potencia:"30w",colores:"l30.png"},{potencia:"20w",colores:"l20.png"},{potencia:"24w",colores:"l24.png"},{potencia:"18w",colores:"l18.png"},{potencia:"15w",colores:"l15.png"},{potencia:"12w",colores:"l12.png"},{potencia:"10w",colores:"l10.png"},{potencia:"0",colores:"sn.png"}],estado:"ACTIVO",filter:"",colums:[{name:"id",label:"id",field:"id"},{name:"nroposte",label:"nroposte",field:"nroposte"},{name:"potencia",label:"potencia",field:"potencia"},{name:"material",label:"material",field:"material"},{name:"observacion",label:"observacion",field:"observacion"},{name:"ubicacion",label:"ubicacion",field:"ubicacion"}],puntos:[],map:null,punto:{},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:16,center:{lat:-17.97031,lng:-67.11178},markerLatLng:[-17.97031,-67.11178],ubicacion:{lat:-17.97031,lng:-67.11178},marker:{}}},created(){this.geolocate()},methods:{searchPlace(){if(""==this.numeroposte||void 0==this.numeroposte)return this.datos=[],!1;this.datos=[],this.$axios.get("buscarPoste/"+this.numeroposte).then((t=>{console.log(t.data),t.data.length>0&&(this.datos.push(t.data[0]),this.ubicacion={lat:t.data[0].lat,lng:t.data[0].lng},this.center=this.ubicacion,this.zoom=18)}))},cargarpunto(t){console.log(t.latlng),this.lat=t.latlng.lat,this.lng=t.latlng.lng,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion},handleMarkerDrag(t){this.ubicacion={lat:t.latLng.lat(),lng:t.latLng.lng()}},updateCoordinates(t){this.lat=t.latLng.lat(),this.lng=t.latLng.lng(),this.ubicacion=[this.lat,this.lng]},registropunto(){this.punto.lat=this.lat.toFixed(8),this.punto.lng=this.lng.toFixed(8),this.dialogRegistro=!0},async geolocate(){this.ubicacion=[0,0],navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{console.log(t),this.lat=t.coords.latitude,this.lng=t.coords.longitude,this.ubicacion=[this.lat,this.lng],this.center=this.ubicacion,this.zoom=18}),(function(t){switch(t.code){case t.PERMISSION_DENIED:console.log("El usuario denegó el permiso para la Geolocalización");break;case t.POSITION_UNAVAILABLE:console.log("La ubicación no está disponible.");break;case t.TIMEOUT:console.log("Se ha excedido el tiempo para obtener la ubicación");break;case t.UNKNOWN_ERROR:console.log(" Un error desconocido.");break}}))},cargarcolor(){console.log("sdfds"),""==this.punto.potencia&&(this.punto.color=[]),this.poten.forEach((t=>{t.potencia==this.punto.potencia&&(this.punto.color=t.colores)}))},regPoste(){this.poten.forEach((t=>{t.potencia==this.punto.potencia&&(this.punto.color=t.colores)})),console.log(this.punto),this.$axios.post("poste",this.punto).then((t=>{this.dialogRegistro=!1,this.punto={},this.mispuntos}))},updatePoste(){console.log(this.punto),this.poten.forEach((t=>{t.potencia==this.punto.potencia&&(this.punto.color=t.colores)})),this.$axios.post("upPoste",this.punto).then((t=>{this.modalpunto=!1}))},async onClick(){switch(console.log(this.distrito.value),this.distrito.value){case"D1":this.datos=this.d1;break;case"D1 EXT":this.datos=this.d1e;break;case"D2":this.datos=this.d2;break;case"D2 EXT":this.datos=this.d2e;break;case"D3":this.datos=this.d3;break;case"D3 EXT":this.datos=this.d3e;break;case"D4":this.datos=this.d4;break;case"D4 EXT":this.datos=this.d4e;break;case"D5":this.datos=this.d5;break;case"D5 EXT":this.datos=this.d5e;break;default:this.datos=[];break}},frmmodalpunto(t){this.modalpunto=!0,this.punto=t},clickclientes(t){this.center=[t.lat,t.lng],this.zoom=18},cambioestado(){console.log(this.punto),this.$axios.put("poste/"+this.punto.id,this.punto)},mispuntos(){this.postes=[],this.puntos=[],this.$q.loading.show(),this.$axios.post("listaposte",{distrito:this.distrito.value}).then((t=>{this.datos=t.data,this.$q.loading.hide(),console.log(this.puntos)}))}}},Ke=Je,ta=Object(f["a"])(Ke,We,Xe,!1,null,null,null),ea=ta.exports;at()(ta,"components",{QPage:j["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QForm:K["a"],QInput:H["a"],QSelect:tt["a"],QCardActions:ut["a"],QBtn:Y["a"],QTable:V["a"],QIcon:Z["a"],QTd:G["a"]}),at()(ta,"directives",{ClosePopup:pt["a"]});var aa=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pa-xs"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-card",[e("q-card-section",{staticClass:"bg-green text-white text-center text-subtitle2"},[t._v("Reporte de denuncias")]),e("q-card-section",[e("q-form",{on:{submit:function(e){return e.preventDefault(),t.reporte2.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-4"},[e("q-input",{attrs:{outlined:"",dense:"",label:"Fecha inicio",type:"date"},model:{value:t.fecha1,callback:function(e){t.fecha1=e},expression:"fecha1"}})],1),e("div",{staticClass:"col-12 col-sm-4"},[e("q-input",{attrs:{outlined:"",dense:"",label:"Fecha fin",type:"date"},model:{value:t.fecha2,callback:function(e){t.fecha2=e},expression:"fecha2"}})],1),e("div",{staticClass:"col-12 col-sm-4 flex flex-center"},[e("q-btn",{staticClass:"full-width full-height",attrs:{type:"submit",label:"Generar reporte",color:"positive",icon:"print"}})],1)])])],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-table",{attrs:{title:"Denuncias",data:t.misdenuncias,color:"primary","row-key":"name",columns:t.columns},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Exportar a csv","no-caps":""},on:{click:t.exportTable}})]},proxy:!0}])})],1)]),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})])},oa=[];function ia(t,e,a){let o=void 0!==e?e(t,a):t;return o=void 0===o||null===o?"":String(o),o=o.split('"').join('""'),`"${o}"`}var sa={name:"Reportedenuncia",data(){return{fecha1:P["a"].formatDate(new Date,"YYYY-MM-DD"),fecha2:P["a"].formatDate(new Date,"YYYY-MM-DD"),misdenuncias:[],cadena:"",columns:[{name:"actividad",field:"actividad",label:"ACTIVIDAD"},{name:"estado",field:"estado",label:"ESTADO"},{name:"fechaman",field:"fechaman",label:"FECHA MAN"},{name:"horaman",field:"horaman",label:"HORA MAN"},{name:"tecnico",field:"tecnico",label:"TECNICO"},{name:"nroposte",field:t=>t.poste.nroposte,label:"NRO POSTE"},{name:"reclamo",field:"reclamo",label:"RECLAMO"},{name:"fecha",field:"fecha",label:"FECHA"},{name:"ci",field:t=>t.persona.ci,label:"CI"},{name:"nombre",field:t=>t.persona.nombre,label:"NOMBRE"},{name:"telefono",field:t=>t.persona.telefono,label:"TELEFONO"}]}},created(){this.$store.state.login.boolreporte||this.$router.replace({path:"/home"})},methods:{exportTable(){const t=[this.columns.map((t=>ia(t.label)))].concat(this.misdenuncias.map((t=>this.columns.map((e=>ia("function"===typeof e.field?e.field(t):t[void 0===e.field?e.name:e.field],e.format,t))).join(",")))).join("\r\n"),e=Object(Nt["a"])(P["a"].formatDate(new Date,"YYYY-MM-DD")+"Denuncias.csv",t,"text/csv");!0!==e&&$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},reporte2(){this.cadena="",this.$axios.post("reporteReclamo",{ini:this.fecha1,fin:this.fecha2}).then((t=>{console.log(t.data),this.misdenuncias=t.data,this.cadena="<style>          *{font-size:10px}          table{width:100%; border-collapse: collapse;}          table, th, td {  border: 1px solid;}          titulo{font-weight: bold; font-size:16px; text-align: center;}          </style>          <div >            <table style='border:0;'><tr><td style='border:0;width:20%;'><img src='logo.jpg' style='width:50px; height:50px;'/></td>               <td class='titulo' style='border:0;'> RESUMEN DE DENUNCIAS DEL "+this.fecha1+" AL "+this.fecha2+"</td>               </tr>            </table>            <table>            <thead><tr><th>N</th><th>FECHA</th><th>N POSTE</th><th>ESTADO</th><th>CONTRIBUYENTE</th><th>CI/RUN</th><th>HORA</th><th>OPERADOR</th><th>FECHA MAN</th><th>ACTIVIDAD</th></tr></thead>          <tbody>";let e=0;this.misdenuncias.forEach((t=>{e++,null==t.tecnico&&(t.tecnico=""),null==t.fechaman&&(t.fechaman=""),null==t.actividad&&(t.actividad=""),this.cadena+="<tr>              <td>"+e+"</td>              <td>"+t.fecha+"</td>              <td>"+t.poste.nroposte+"</td>              <td>"+t.estado+"</td>              <td>"+t.persona.nombre+"</td>              <td>"+t.persona.ci+"</td>              <td>"+t.hora+"</td>              <td>"+t.tecnico+"</td>              <td>"+t.fechaman+"</td>              <td>"+t.actividad+"</td>              </tr>"})),this.cadena+="</tbody></table></div>",document.getElementById("myelement").innerHTML=this.cadena;const a=new z["Printd"];a.print(document.getElementById("myelement"))}))}}},na=sa,la=Object(f["a"])(na,aa,oa,!1,null,"3de139fe",null),ra=la.exports;at()(la,"components",{QPage:j["a"],QCard:X["a"],QCardSection:J["a"],QForm:K["a"],QInput:H["a"],QBtn:Y["a"],QTable:V["a"]});var ca=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pa-md q-gutter-md"},[e("div",[t._v("INSPECCION O MANTENIMIENTO ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("q-input",{attrs:{type:"date",label:"Fecha"},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}})],1),e("div",{staticClass:"col-4"},[e("q-btn",{attrs:{color:"primary",icon:"search",label:"OK"},on:{click:t.Buscar}})],1)]),e("div",[e("gmap-map",{staticStyle:{width:"100%",height:"500px"},attrs:{center:t.center,zoom:t.zoom,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1}}},t._l(t.puntos,(function(a){return e("gmap-marker",{key:a.id,attrs:{position:{lat:a.lat,lng:a.lng},clickable:!0,draggable:!1,title:a.material,optimized:!0},on:{click:function(e){t.center={lat:a.lat,lng:a.lng},t.punto=a,t.frmmodalpunto(a)}}})})),1)],1),e("q-table",{attrs:{data:t.puntos,columns:t.colums,filter:t.filter},scopedSlots:t._u([{key:"body-cell-nroposte",fn:function(a){return[e("q-td",{attrs:{props:a},on:{click:function(e){return t.frmmodalpunto(a.row)}}},[t._v("\n         "+t._s(a.row.nroposte)+"\n       ")])]}},{key:"body-cell-ubicacion",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{color:"ACTIVO"==a.row.estado?"primary":"negative",icon:"place",size:"xs"},on:{click:function(e){return t.clickclientes(a.row)}}})],1)]}},{key:"top-right",fn:function(){return[e("q-btn",{attrs:{icon:"refresh",color:"info"},on:{click:t.mispuntos}}),e("q-btn",{attrs:{icon:"adjust",color:"negative"},on:{click:t.centro}}),e("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0}])}),e("q-dialog",{attrs:{"full-width":""},model:{value:t.modalpunto,callback:function(e){t.modalpunto=e},expression:"modalpunto"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Nro poste "+t._s(t.poste.nroposte)+" lat:"+t._s(t.poste.lat)+" lng:"+t._s(t.poste.lng))])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"text",label:"Luminaria"},model:{value:t.poste.luminaria,callback:function(e){t.$set(t.poste,"luminaria",e)},expression:"poste.luminaria"}})],1),e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"text",label:"Material"},model:{value:t.poste.material,callback:function(e){t.$set(t.poste,"material",e)},expression:"poste.material"}})],1),e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"text",label:"Altura"},model:{value:t.poste.altura,callback:function(e){t.$set(t.poste,"altura",e)},expression:"poste.altura"}})],1),e("div",{staticClass:"col-md-3 col-xs-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,type:"text",label:"Potencia"},model:{value:t.poste.potencia,callback:function(e){t.$set(t.poste,"potencia",e)},expression:"poste.potencia"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{dense:"",outlined:"",disable:!0,label:"Estado"},model:{value:t.punto.estado,callback:function(e){t.$set(t.punto,"estado",e)},expression:"punto.estado"}})],1)])])],1)],1)],1),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})],1)},da=[];a("d055");var ua={data(){return{modalpunto:!1,fecha:P["a"].formatDate(new Date,"YYYY-MM-DD"),filter:"",url:"https://electrica.gamo.cf/#/consulta",poste:{},persona:{},qrImage2:"",qrImage:"",colums:[{name:"nroposte",label:"nroposte",field:"nroposte"},{name:"potencia",label:"potencia",field:"potencia"},{name:"ubicacion",label:"ubicacion",field:"ubicacion"}],puntos:[],puntostabla:[],punto:{},attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:13,center:{lat:-17.97031,lng:-67.11178},markerLatLng:[-17.97031,-67.11178],opts:{errorCorrectionLevel:"M",type:"png",quality:.95,width:100,margin:1,color:{dark:"#000000",light:"#FFF"}},opts2:{errorCorrectionLevel:"M",type:"png",quality:.95,width:50,margin:1,color:{dark:"#000000",light:"#FFF"}}}},created(){this.Buscar()},methods:{Buscar(){this.$axios.post("listplan",{fecha:this.fecha}).then((t=>{console.log(t.data),t.data.forEach((t=>{null==t.nroposte&&(t.nroposte=""),this.puntos.push(t)}))}))},frmmodalpunto(t){console.log(t),this.modalpunto=!0,this.poste=t},clickclientes(t){this.center={lat:t.lat,lng:t.lng},this.zoom=18},centro(){this.center=[-17.97031,-67.11178],this.zoom=13}}},pa=ua,ma=Object(f["a"])(pa,ca,da,!1,null,null,null),ha=ma.exports;at()(ma,"components",{QPage:j["a"],QInput:H["a"],QBtn:Y["a"],QTable:V["a"],QTd:G["a"],QIcon:Z["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QForm:K["a"]});var ba=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-btn",{staticClass:"q-mb-xs",attrs:{label:"Nuevo",color:"positive",icon:"add_circle"},on:{click:function(e){t.alert=!0}}}),e("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"70%"}},[e("q-card-section",{staticClass:"bg-green-14 text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"add_circle"}}),t._v(" REGISTRO NUEVO")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("q-select",{attrs:{outlined:"",options:["D1","D2","D3","D4","D5"],label:"Distrito",required:""},model:{value:t.dato.distrito,callback:function(e){t.$set(t.dato,"distrito",e)},expression:"dato.distrito"}})],1),e("div",{staticClass:"col-6"},[e("q-select",{attrs:{"use-input":"","input-debounce":"0",options:t.juntas,label:"Junta Vecinal",outlined:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[t._v("\n          No results\n        ")])],1)]},proxy:!0}]),model:{value:t.junta,callback:function(e){t.junta=e},expression:"junta"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",type:"text",label:"Celular","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.celular,callback:function(e){t.$set(t.dato,"celular",e)},expression:"dato.celular"}})],1),e("div",{staticClass:"col-6"},[e("q-select",{attrs:{outlined:"",options:["ZONA NORTE","ZONA ESTE","ZONA CENTRAL","ZONA OESTE","ZONA SUD","ZONA NOR ESTE","ZONA NOR OESTE","ZONA SUD ESTE","ZONA SUD OESTE"],label:"Zona","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.zona,callback:function(e){t.$set(t.dato,"zona",e)},expression:"dato.zona"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",label:"Fecha",type:"date","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.fecha,callback:function(e){t.$set(t.dato,"fecha",e)},expression:"dato.fecha"}})],1),e("div",{staticClass:"col-6"},[e("q-select",{attrs:{options:t.lista,label:"Actividad",outlined:"",required:""},model:{value:t.tipo,callback:function(e){t.tipo=e},expression:"tipo"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",label:"Cantidad",type:"number","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.cantidad,callback:function(e){t.$set(t.dato,"cantidad",e)},expression:"dato.cantidad"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",label:"Descripcion"},model:{value:t.dato.descripcion,callback:function(e){t.$set(t.dato,"descripcion",e)},expression:"dato.descripcion"}})],1)]),e("div",[e("q-btn",{attrs:{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)])],1)],1)],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",type:"date",label:"Fecha Ini"},model:{value:t.ini,callback:function(e){t.ini=e},expression:"ini"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",type:"date",label:"Fecha Fin"},model:{value:t.fin,callback:function(e){t.fin=e},expression:"fin"}})],1),e("div",{staticClass:"col-3"},[e("q-btn",{attrs:{dense:"",color:"green",icon:"search",label:"Buscar"},on:{click:t.Buscar}})],1),e("div",{staticClass:"col-3"},[e("q-btn",{attrs:{dense:"",color:"info",icon:"file_download",label:"Export Excel"},on:{click:t.impresion}})],1)]),e("q-table",{attrs:{filter:t.filter,title:"LISTA Cronograma",data:t.data,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100]},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"yellow",icon:"edit"},on:{click:function(e){return t.editRow(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteRow(a)}}})],1)]}}])}),e("q-dialog",{model:{value:t.dialog_mod,callback:function(e){t.dialog_mod=e},expression:"dialog_mod"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"50%"}},[e("q-card-section",{staticClass:"bg-warning text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"edit"}}),t._v(" MODIFICAR DATOS ")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onMod}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("q-select",{attrs:{outlined:"",options:["D1","D2","D3","D4","D5"],label:"Distrito",required:""},model:{value:t.dato2.distrito,callback:function(e){t.$set(t.dato2,"distrito",e)},expression:"dato2.distrito"}})],1),e("div",{staticClass:"col-6"},[e("q-select",{attrs:{"use-input":"","input-debounce":"0",options:t.juntas,label:"Junta Vecinal",outlined:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[t._v("\n          No results\n        ")])],1)]},proxy:!0}]),model:{value:t.junta,callback:function(e){t.junta=e},expression:"junta"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",type:"text",label:"Celular","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.celular,callback:function(e){t.$set(t.dato2,"celular",e)},expression:"dato2.celular"}})],1),e("div",{staticClass:"col-6"},[e("q-select",{attrs:{outlined:"",options:["ZONA NORTE","ZONA ESTE","ZONA CENTRAL","ZONA OESTE","ZONA SUD","ZONA NOR ESTE","ZONA NOR OESTE","ZONA SUD ESTE","ZONA SUD OESTE"],label:"Zona","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.zona,callback:function(e){t.$set(t.dato2,"zona",e)},expression:"dato2.zona"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",label:"Fecha",type:"date","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.fecha,callback:function(e){t.$set(t.dato2,"fecha",e)},expression:"dato2.fecha"}})],1),e("div",{staticClass:"col-6"},[e("q-select",{attrs:{options:t.lista,label:"Actividad",outlined:"",required:""},model:{value:t.tipo,callback:function(e){t.tipo=e},expression:"tipo"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",label:"Cantidad",type:"number","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.cantidad,callback:function(e){t.$set(t.dato2,"cantidad",e)},expression:"dato2.cantidad"}})],1),e("div",{staticClass:"col-6"},[e("q-input",{attrs:{outlined:"",label:"Descripcion"},model:{value:t.dato2.descripcion,callback:function(e){t.$set(t.dato2,"descripcion",e)},expression:"dato2.descripcion"}})],1)]),e("div",[e("q-btn",{attrs:{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)])],1)],1)],1),e("q-dialog",{model:{value:t.dialog_del,callback:function(e){t.dialog_del=e},expression:"dialog_del"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"clear",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("Seguro de eliminar Registro.")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Eliminar",color:"deep-orange"},on:{click:t.onDel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},ga=[],fa=a("1542"),va=a.n(fa);const{addToDate:qa}=P["a"];var Ca={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",tipo:{},dato:{},juntas:[],jfilter:[],junta:{},ini:P["a"].formatDate(new Date,"YYYY-MM-DD"),fin:P["a"].formatDate(new Date,"YYYY-MM-DD"),lista:[{label:"Mantenimiento",codigo:"160002",actividad:"PROVISION DE MATERIAL ELECTRICO (MANTENIMIENTO Y EQUIPO DE ALUMBRADO)",tipo:"Mantenimiento"},{label:"Instalaciones Nuevas",codigo:"160006",actividad:"MI ALUMBRADO PUBLICO VECINAL",tipo:"Instalaciones nuevas"},{label:"Instalacion de Postes",codigo:"160005",actividad:"RENOVACION DE POSTES DE ILUMINACION PUBLICA",tipo:"Instalacion de Postes"}],model:"",dato2:{},options:[],props:[],modelpermiso:!1,uni:{},columns:[{name:"codigo",align:"left",label:"Codigo ",field:"codigo",sortable:!0},{name:"actividad",align:"left",label:"actividad ",field:"actividad",sortable:!0},{name:"distrito",align:"left",label:"distrito ",field:"distrito",sortable:!0},{name:"junta",align:"left",label:"junta ",field:"junta",sortable:!0},{name:"zona",align:"left",label:"zona ",field:"zona",sortable:!0},{name:"tipo",align:"left",label:"tipo ",field:"tipo",sortable:!0},{name:"cantidad",align:"left",label:"cantidad ",field:"cantidad",sortable:!0},{name:"fecha",align:"left",label:"fecha ",field:"fecha",sortable:!0},{name:"celular",align:"left",label:"celular ",field:"celular",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"opcion",sortable:!1}],data:[]}},created(){this.Buscar(),this.listJunta(),this.tipo=this.lista[0]},methods:{filterFn(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.juntas=this.jfilter.filter((t=>t.toLowerCase().indexOf(e)>-1))}:()=>{this.juntas=this.jfilter})},Buscar(){this.$q.loading.show(),this.$axios.post("listCrono",{ini:this.ini,fin:this.fin}).then((t=>{console.log(t.data),this.data=t.data,this.$q.loading.hide()}))},listJunta(){this.juntas=[],this.$q.loading.show(),this.$axios.get("junta").then((t=>{t.data.forEach((t=>{this.juntas.push(t.nombre)})),this.$q.loading.hide(),this.jfilter=this.juntas,this.junta=""}))},impresion(){this.$q.loading.show(),this.$axios.post("datoImp",{ini:this.ini,fin:this.fin}).then((t=>{let e=[{sheet:"Cronograma",columns:[{label:"CAT PROD",value:"codigo"},{label:"NOMBRE DE LA ACTIVIDAD",value:"actividad"},{label:"DISTRITO",value:"distrito"},{label:"BENEFICIARIO",value:"junta"},{label:"UBICACION",value:"zona"},{label:"SUPERVISOR",value:""},{label:"AVANCE FISICO DEL PERIODO",value:"valor1"},{label:"AVANCE FISICO ACUMULADO",value:"valor2"},{label:"CANTIDAD",value:"total"},{label:"UNIDAD",value:"unidad"},{label:"DESCRIPCION",value:"tipo"}],content:t.data}],a={fileName:"Cronograma",extraLength:6,writeOptions:{}};va()(e,a),console.log(t.data),this.$q.loading.hide()}))},editRow(t){this.dato2=t.row,this.junta=this.dato2.junta,this.tipo=this.lista.find((t=>t.tipo==this.dato2.tipo)),this.dialog_mod=!0},deleteRow(t){this.dato2=t.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.dato.codigo=this.tipo.codigo,this.dato.actividad=this.tipo.actividad,this.dato.tipo=this.tipo.tipo,this.dato.junta=this.junta,this.$axios.post("cronograma",this.dato).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={},this.alert=!1,this.Buscar(),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.dato2.codigo=this.tipo.codigo,this.dato2.actividad=this.tipo.actividad,this.dato2.tipo=this.tipo.tipo,this.$axios.put("cronograma/"+this.dato2.id,this.dato2).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.buscar()}))},onDel(){this.$q.loading.show(),this.$axios.delete("cronograma/"+this.dato2.id).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.buscar(),this.$q.loading.hide()}))},onReset(){this.dato={}}}},xa=Ca,ya=a("66e5"),_a=a("4074"),ka=Object(f["a"])(xa,ba,ga,!1,null,null,null),wa=ka.exports;at()(ka,"components",{QBtn:Y["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QIcon:Z["a"],QForm:K["a"],QSelect:tt["a"],QItem:ya["a"],QItemSection:_a["a"],QInput:H["a"],QTable:V["a"],QTd:G["a"],QAvatar:ze["a"],QCardActions:ut["a"]}),at()(ka,"directives",{ClosePopup:pt["a"]});var Oa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-btn",{staticClass:"q-mb-xs",attrs:{label:"Registrar Junta V",color:"positive",icon:"add_circle"},on:{click:function(e){t.alert=!0}}}),e("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"70%"}},[e("q-card-section",{staticClass:"bg-green-14 text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"add_circle"}}),t._v(" REGISTRO DE Junta Vecinal")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[e("q-input",{attrs:{outlined:"",type:"text",label:"Nombre ",hint:"Ingresar nombre","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.nombre,callback:function(e){t.$set(t.dato,"nombre",e)},expression:"dato.nombre"}}),e("q-select",{attrs:{options:["D1","D2","D3","D4","D5"],label:"Distrito",outlined:""},model:{value:t.dato.distrito,callback:function(e){t.$set(t.dato,"distrito",e)},expression:"dato.distrito"}}),e("q-select",{attrs:{options:["ZONA NORTE","ZONA ESTE","ZONA CENTRAL","ZONA OESTE","ZONA SUD","ZONA NOR ESTE","ZONA NOR OESTE","ZONA SUD ESTE","ZONA SUD OESTE"],label:"Zona",outlined:""},model:{value:t.dato.zona,callback:function(e){t.$set(t.dato,"zona",e)},expression:"dato.zona"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Representante",hint:"nombre completo"},model:{value:t.dato.representante,callback:function(e){t.$set(t.dato,"representante",e)},expression:"dato.representante"}}),e("q-input",{attrs:{outlined:"",label:"Celular",hint:"numero de contacto"},model:{value:t.dato.celular,callback:function(e){t.$set(t.dato,"celular",e)},expression:"dato.celular"}}),e("div",[e("q-btn",{attrs:{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-table",{attrs:{filter:t.filter,title:"LISTA DE JUNTAS VECINALES",data:t.data,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100]},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"yellow",icon:"edit"},on:{click:function(e){return t.editRow(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteRow(a)}}})],1)]}}])}),e("q-dialog",{model:{value:t.dialog_mod,callback:function(e){t.dialog_mod=e},expression:"dialog_mod"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"50%"}},[e("q-card-section",{staticClass:"bg-warning text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"edit"}}),t._v(" MODIFICAR DATOS JUNTA V")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onMod}},[e("q-input",{attrs:{outlined:"",type:"text",label:"Nombre ",hint:"Ingresar nombre","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.nombre,callback:function(e){t.$set(t.dato2,"nombre",e)},expression:"dato2.nombre"}}),e("q-select",{attrs:{options:["D1","D2","D3","D4","D5"],label:"Distrito",outlined:""},model:{value:t.dato2.distrito,callback:function(e){t.$set(t.dato2,"distrito",e)},expression:"dato2.distrito"}}),e("q-select",{attrs:{options:["ZONA NORTE","ZONA ESTE","ZONA CENTRAL","ZONA OESTE","ZONA SUD","ZONA NOR ESTE","ZONA NOR OESTE","ZONA SUD ESTE","ZONA SUD OESTE"],label:"Zona",outlined:""},model:{value:t.dato2.zona,callback:function(e){t.$set(t.dato2,"zona",e)},expression:"dato2.zona"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Representante",hint:"nombre completo"},model:{value:t.dato2.representante,callback:function(e){t.$set(t.dato2,"representante",e)},expression:"dato2.representante"}}),e("q-input",{attrs:{outlined:"",label:"Celular",hint:"numero de contacto"},model:{value:t.dato2.celular,callback:function(e){t.$set(t.dato2,"celular",e)},expression:"dato2.celular"}}),e("div",[e("q-btn",{attrs:{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-dialog",{model:{value:t.dialog_del,callback:function(e){t.dialog_del=e},expression:"dialog_del"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"clear",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("Seguro de eliminar Registro.")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Eliminar",color:"deep-orange"},on:{click:t.onDel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},Aa=[];const{addToDate:Da}=P["a"];var Ea={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{},model:"",dato2:{},options:[],props:[],modelpermiso:!1,uni:{},columns:[{name:"nombre",align:"left",label:"NOMBRE ",field:"nombre",sortable:!0},{name:"distrito",align:"left",label:"distrito ",field:"distrito",sortable:!0},{name:"zona",align:"left",label:"zona ",field:"zona",sortable:!0},{name:"representante",align:"left",label:"representante ",field:"representante",sortable:!0},{name:"celular",align:"left",label:"CELULAR",field:"celular",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"opcion",sortable:!1}],data:[]}},created(){this.misdatos()},methods:{misdatos(){this.$q.loading.show(),this.$axios.get("junta").then((t=>{console.log(t.data),this.data=t.data,this.$q.loading.hide()}))},editRow(t){this.dato2=t.row,this.dialog_mod=!0},deleteRow(t){this.dato2=t.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("junta",this.dato).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={},this.alert=!1,this.misdatos()})).catch((t=>{console.log(t.response.data),this.$q.notify({message:t.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("junta/"+this.dato2.id,this.dato2).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("junta/"+this.dato2.id).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato={}}}},Ia=Ea,Ra=Object(f["a"])(Ia,Oa,Aa,!1,null,null,null),$a=Ra.exports;at()(Ra,"components",{QBtn:Y["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QIcon:Z["a"],QForm:K["a"],QInput:H["a"],QSelect:tt["a"],QTable:V["a"],QTd:G["a"],QAvatar:ze["a"],QCardActions:ut["a"]}),at()(Ra,"directives",{ClosePopup:pt["a"]});var Sa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-btn",{staticClass:"q-mb-xs",attrs:{label:"Registrar Material",color:"positive",icon:"add_circle"},on:{click:function(e){t.alert=!0}}}),e("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"70%"}},[e("q-card-section",{staticClass:"bg-green-14 text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"add_circle"}}),t._v(" REGISTRO MATERIALES ALMACEN")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[e("q-input",{attrs:{outlined:"",type:"text",label:"CODIGO ",hint:"Ingresar codigo","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.codigo,callback:function(e){t.$set(t.dato,"codigo",e)},expression:"dato.codigo"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Nombre ",hint:"Ingresar nombre","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.nombre,callback:function(e){t.$set(t.dato,"nombre",e)},expression:"dato.nombre"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Unidad Medida ",hint:"Ingresar unidad","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.unidad,callback:function(e){t.$set(t.dato,"unidad",e)},expression:"dato.unidad"}}),e("q-input",{attrs:{outlined:"",type:"number",label:"Minimo stock",hint:"minimo alerta"},model:{value:t.dato.minimo,callback:function(e){t.$set(t.dato,"minimo",e)},expression:"dato.minimo"}}),e("q-toggle",{attrs:{color:"green","false-value":"NO","true-value":"SI",label:t.dato.codificar+" CODIFICAR"},model:{value:t.dato.codificar,callback:function(e){t.$set(t.dato,"codificar",e)},expression:"dato.codificar"}}),e("div",[e("q-btn",{attrs:{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-table",{attrs:{filter:t.filter,title:"LISTA DE MATERIALES ALMACEN",data:t.data,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100]},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"yellow",icon:"edit"},on:{click:function(e){return t.editRow(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteRow(a)}}})],1)]}}])}),e("q-dialog",{model:{value:t.dialog_mod,callback:function(e){t.dialog_mod=e},expression:"dialog_mod"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"50%"}},[e("q-card-section",{staticClass:"bg-warning text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"edit"}}),t._v(" MODIFICAR DATOS MATERIAL")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onMod}},[e("q-input",{attrs:{outlined:"",type:"text",label:"CODIGO ",hint:"Ingresar codigo","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.codigo,callback:function(e){t.$set(t.dato2,"codigo",e)},expression:"dato2.codigo"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Nombre ",hint:"Ingresar nombre","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.nombre,callback:function(e){t.$set(t.dato2,"nombre",e)},expression:"dato2.nombre"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Unidad Medida ",hint:"Ingresar unidad","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.unidad,callback:function(e){t.$set(t.dato2,"unidad",e)},expression:"dato2.unidad"}}),e("q-input",{attrs:{outlined:"",type:"number",label:"Minimo stock",hint:"nimimo alerta"},model:{value:t.dato2.minimo,callback:function(e){t.$set(t.dato2,"minimo",e)},expression:"dato2.minimo"}}),e("q-toggle",{attrs:{color:"green","false-value":"NO","true-value":"SI",label:t.dato2.codificar+" CODIFICAR"},model:{value:t.dato2.codificar,callback:function(e){t.$set(t.dato2,"codificar",e)},expression:"dato2.codificar"}}),e("div",[e("q-btn",{attrs:{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-dialog",{model:{value:t.dialog_del,callback:function(e){t.dialog_del=e},expression:"dialog_del"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"clear",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("Seguro de eliminar Registro.")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Eliminar",color:"deep-orange"},on:{click:t.onDel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},Ta=[];const{addToDate:Na}=P["a"];var Ma={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{codificar:"NO"},model:"",dato2:{},options:[],props:[],modelpermiso:!1,uni:{},columns:[{name:"codigo",align:"left",label:"CODIGO ",field:"codigo",sortable:!0},{name:"nombre",align:"left",label:"NOMBRE ",field:"nombre",sortable:!0},{name:"unidad",align:"left",label:"UNIDAD ",field:"unidad",sortable:!0},{name:"stock",align:"left",label:"STOCK ",field:"stock",sortable:!0},{name:"minimo",align:"left",label:"MINIMO",field:"minimo",sortable:!0},{name:"codificar",align:"left",label:"codificar",field:"codificar",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"opcion",sortable:!1}],data:[]}},created(){this.misdatos()},methods:{misdatos(){this.$q.loading.show(),this.$axios.get("material").then((t=>{console.log(t.data),this.data=t.data,this.$q.loading.hide()}))},editRow(t){this.dato2=t.row,this.dialog_mod=!0},deleteRow(t){this.dato2=t.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("material",this.dato).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={codificar:"NO"},this.alert=!1,this.misdatos()})).catch((t=>{console.log(t.response.data),this.$q.notify({message:t.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("material/"+this.dato2.id,this.dato2).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("material/"+this.dato2.id).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato={codificar:"NO"}}}},La=Ma,Qa=Object(f["a"])(La,Sa,Ta,!1,null,null,null),Pa=Qa.exports;at()(Qa,"components",{QBtn:Y["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QIcon:Z["a"],QForm:K["a"],QInput:H["a"],QToggle:dt["a"],QTable:V["a"],QTd:G["a"],QAvatar:ze["a"],QCardActions:ut["a"]}),at()(Qa,"directives",{ClosePopup:pt["a"]});var za=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("q-input",{attrs:{outlined:"",type:"text",label:"NRO COMPRA"},model:{value:t.nrocompra,callback:function(e){t.nrocompra=e},expression:"nrocompra"}})],1),e("div",{staticClass:"col-3"},[e("q-select",{attrs:{outlined:"",options:t.materiales,label:"MATERIALES"},model:{value:t.material,callback:function(e){t.material=e},expression:"material"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{color:"green",icon:"search",label:"Buscar"},on:{click:t.misdatos}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{color:"info",icon:"print"},on:{click:t.printfull}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{color:"red",icon:"delete_sweep"},on:{click:t.baja}})],1)]),e("q-table",{attrs:{filter:t.filter,title:"LISTA DE INVENTARIO",data:t.data,columns:t.columns,"row-key":"id","rows-per-page-options":[50,100],"selected-rows-label":t.getSelectedString,selection:"multiple",selected:t.selected},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{color:"info",icon:"qr_code_2",dense:""},on:{click:function(e){return t.qrPrinttodo(a.row)}}})],1)]}},{key:"body-cell-nombre",fn:function(a){return[e("q-td",{key:"nombre",attrs:{props:a}},[t._v("\n          "+t._s(a.row.material.nombre)+"\n        ")])]}}])}),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})],1)},Ua=[],Fa=a("d055"),Ba=a.n(Fa);const{addToDate:ja}=P["a"];var Ya={data(){return{selected:[],alert:!1,dialog_mod:!1,dialog_del:!1,nrocompra:"",filter:"",dato:{codificar:"NO"},model:"",dato2:{},options:[],props:[],modelpermiso:!1,imgqr:{},uni:{},columns:[{name:"codigo",align:"left",label:"CODIGO ",field:"codigo",sortable:!0},{name:"nombre",align:"left",label:"NOMBRE ",field:"nombre",sortable:!0},{name:"cantidad",align:"left",label:"CANTIDAD ",field:"cantidad",sortable:!0},{name:"num",align:"left",label:"NUMERO ",field:"num",sortable:!0},{name:"gestion",align:"left",label:"GESTION ",field:"gestion",sortable:!0},{name:"estado",align:"left",label:"ESTADO ",field:"estado",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"opcion",sortable:!1}],materiales:[],url:"https://electricab.gamo.cf/api/",material:{},data:[],opts:{errorCorrectionLevel:"M",type:"png",quality:.95,width:100,margin:1,color:{dark:"#000000",light:"#FFF"}}}},created(){this.mismateriales(),this.misdatos()},methods:{getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} record${this.selected.length>1?"s":""} selected of ${this.data.length}`},qrPrint(t){Ba.a.toDataURL(t.codigo).then((t=>{this.$q.dialog({title:"Codigo QR",message:`<div style="text-align: center"><img src="${t}" style='width:50px;height:50px;'/></div>`,html:!0,ok:!1,cancel:{label:"Cerrar",color:"primary",flat:!0,noDismiss:!0}})})).catch((t=>{console.error(t)}))},async qrPrinttodo(t){let e="";this.imgqr=await Ba.a.toDataURL(t.codigo,this.opts),e="<div style=''><img src="+this.imgqr+" style='width:50px;height:50px;padding:5px 0 0 0;margin:0 '/></div> <div style='font-size:4px; padding:0;margin:0;'>"+t.codigo+"</div>",document.getElementById("myelement").innerHTML=e;const a=new z["Printd"];a.print(document.getElementById("myelement"))},printfull(){if(0==this.selected.length)return!1;this.$axios.post("generatePdf",this.selected).then((t=>{console.log(t.data),window.open(this.url+"qrFile","_blank")}))},baja(){if(console.log(this.selected),0==this.selected.length)return!1;this.$q.dialog({title:"Baja Inventario",message:"Cual es el motivo?",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((t=>{this.$axios.post("bajaInv",{motivo:t,datos:this.selected}).then((t=>{console.log(t.data),this.misdatos()}))})).onCancel((()=>{})).onDismiss((()=>{}))},async cadenatexto(t){return this.imgqr=await Ba.a.toDataURL(t.codigo,this.opts),"<div><img src="+this.imgqr+" style='width:50px;height:50px;'/></div>"},mismateriales(){this.$q.loading.show(),this.$axios.get("material").then((t=>{console.log(t.data),t.data.forEach((t=>{t.label=t.nombre})),this.materiales=t.data,this.$q.loading.hide(),this.material=this.materiales[0]}))},misdatos(){this.$q.loading.show(),this.$axios.post("buscarInv",{compra:this.nrocompra,material_id:this.material.id}).then((t=>{console.log(t.data),this.data=t.data,this.$q.loading.hide()}))}}},Va=Ya,Ga=Object(f["a"])(Va,za,Ua,!1,null,null,null),Ha=Ga.exports;at()(Ga,"components",{QInput:H["a"],QSelect:tt["a"],QBtn:Y["a"],QTable:V["a"],QIcon:Z["a"],QTd:G["a"]});var Za=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[e("div",{staticClass:"col-6"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:function(e){return e.preventDefault(),t.consultar.apply(null,arguments)}}},[e("div",{staticClass:"col-6"},[e("q-input",{attrs:{type:"text",label:"Codigo Material",autofocus:"",dense:"",outlined:""},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),e("div")])],1),t.correcto?[e("table",[e("tr",[e("th",[t._v("Nro Compra")]),e("td",[t._v(t._s(t.info.compra.nrocompra))])]),e("tr",[e("th",[t._v("Fecha Compra")]),e("td",[t._v(t._s(t.info.compra.fecha))])]),e("tr",[e("th",[t._v("Proveedor/Tienda")]),e("td",[t._v(t._s(t.info.compra.tienda.nombre))])]),e("tr",[e("th",[t._v("Codigo Material")]),e("td",[t._v(t._s(t.info.material.codigo))])]),e("tr",[e("th",[t._v("Material")]),e("td",[t._v(t._s(t.info.material.nombre))])]),e("tr",[e("th",[t._v("Cantidad Stock")]),e("td",[t._v(t._s(t.info.material.stock))])]),e("tr",[e("th",[t._v("Cantidad Compra")]),e("td",[t._v(t._s(t.info.cantidad))])]),e("tr",[e("th",[t._v("Numero")]),e("td",[t._v(t._s(t.info.num))])])])]:t._e()],2)},Wa=[],Xa={data(){return{info:{},correcto:!1,codigo:""}},created(){},methods:{consultar(){if(void 0==this.codigo||""==this.codigo)return!1;this.info={},this.correcto=!1,this.$axios.get("recuperaInv/"+this.codigo).then((t=>{console.log(t.data),""!=t.data&&(this.info=t.data,this.correcto=!0)})),this.codigo=""}}},Ja=Xa,Ka=(a("8d82"),Object(f["a"])(Ja,Za,Wa,!1,null,null,null)),to=Ka.exports;at()(Ka,"components",{QPage:j["a"],QForm:K["a"],QInput:H["a"]});var eo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-btn",{staticClass:"q-mb-xs",attrs:{label:"Registro de Compra",color:"positive",icon:"add_circle"},on:{click:function(e){t.alert=!0}}}),e("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"70%"}},[e("q-card-section",{staticClass:"bg-green-14 text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"add_circle"}}),t._v(" REGISTRO COMPRA MATERIAL")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.registrar,reset:t.onReset}},[""!=t.mensaje?e("div",{staticClass:"q-pd-md",staticStyle:{color:"red"}},[t._v(t._s(t.mensaje))]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Nro Compra","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"],required:""},on:{keyup:t.validarCompra},model:{value:t.dato.nrocompra,callback:function(e){t.$set(t.dato,"nrocompra",e)},expression:"dato.nrocompra"}})],1),e("div",{staticClass:"col-4"},[e("q-input",{attrs:{dense:"",outlined:"",type:"date",label:"Fecha","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"],required:""},model:{value:t.dato.fecha,callback:function(e){t.$set(t.dato,"fecha",e)},expression:"dato.fecha"}})],1),e("div",{staticClass:"col-4"},[e("q-select",{attrs:{dense:"",options:t.tiendas,label:"Tienda/Proveedor",outlined:"",required:""},model:{value:t.tienda,callback:function(e){t.tienda=e},expression:"tienda"}})],1)]),e("div",{staticClass:"row q-md-pd"},[e("div",{staticClass:"col-4"},[e("q-select",{attrs:{dense:"",options:t.materiales,label:"Material",outlined:""},model:{value:t.reg.material,callback:function(e){t.$set(t.reg,"material",e)},expression:"reg.material"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",type:"number",label:"Cantidad",outlined:""},model:{value:t.reg.cantidad,callback:function(e){t.$set(t.reg,"cantidad",e)},expression:"reg.cantidad"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",type:"number",step:"0.01",label:"P Unitario",outlined:""},model:{value:t.reg.unitario,callback:function(e){t.$set(t.reg,"unitario",e)},expression:"reg.unitario"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{dense:"",color:"green",icon:"control_point"},on:{click:t.agregarMaterial}})],1)]),e("div",{staticClass:"col-12"},[e("q-table",{attrs:{title:"Lista de Compra ",data:t.listado,columns:t.columna2,"row-key":"name"},scopedSlots:t._u([{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",color:"red",icon:"delete"},on:{click:function(e){return t.eliminar(a)}}})],1)]}},{key:"body-cell-unidad",fn:function(a){return[e("q-td",{key:"unidad",attrs:{props:a}},[t._v("\n                      "+t._s(a.row.material.unidad)+"\n                  ")])]}},{key:"body-cell-material",fn:function(a){return[e("q-td",{key:"material",attrs:{props:a}},[t._v("\n                    "+t._s(a.row.material.nombre)+"\n                ")])]}},{key:"body-cell-codificar",fn:function(a){return[e("q-td",{key:"codificar",attrs:{props:a}},[t._v("\n                    "+t._s(a.row.material.codificar)+"\n                ")])]}}])})],1),e("div",[e("q-btn",{attrs:{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)])],1)],1)],1),e("q-table",{attrs:{filter:t.filter,title:"LISTA DE COMPRAS",data:t.compras,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100]},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"accent",icon:"local_mall"},on:{click:function(e){return t.viewRow(a.row)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteRow(a)}}})],1)]}}])}),e("q-dialog",{model:{value:t.dialog_del,callback:function(e){t.dialog_del=e},expression:"dialog_del"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"clear",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("Seguro de eliminar Registro.")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Eliminar",color:"deep-orange"},on:{click:t.onDel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1),e("q-dialog",{model:{value:t.dialogDetalle,callback:function(e){t.dialogDetalle=e},expression:"dialogDetalle"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"shopping_cart",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("DETALLE DE COMPRA")])],1),e("q-card-section",[e("table",[e("tr",[e("th",[t._v("MATERIAL")]),e("th",[t._v("CANTIDAD")]),e("th",[t._v("PRECIO")]),e("th",[t._v("SUBTOTAL")])]),t._l(t.detalle,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.material.nombre))]),e("td",[t._v(t._s(a.cantidad))]),e("td",[t._v(t._s(a.unitario))]),e("td",[t._v(t._s(a.total))])])}))],2)]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},ao=[];a("fed6");const{addToDate:oo}=P["a"];var io={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,dialogDetalle:!1,listado:[],filter:"",dato:{},model:"",dato2:{},options:[],props:[],material:{},tienda:{},materiales:[],tiendas:[],compras:[],detalle:[],reg:{material:{label:""}},modelpermiso:!1,mensaje:"",uni:{},columns:[{name:"codigo",align:"left",label:"NRO COMPRA ",field:"nrocompra",sortable:!0},{name:"fecha",align:"left",label:"FECHA",field:"fecha",sortable:!0},{name:"gestion",align:"left",label:"gestion",field:"gestion",sortable:!0},{name:"tienda",align:"left",label:"TIENDA/PROV",field:t=>t.tienda.nombre,sortable:!0},{name:"opcion",label:"OPCIÓN",field:"opcion",sortable:!1}],columna2:[{name:"opcion",label:"opcion",field:"opcion"},{name:"cantidad",label:"CANTIDAD",field:"cantidad"},{name:"unidad",label:"UNIDAD",field:"unidad"},{name:"material",label:"MATERIAL",field:"material"},{name:"unitario",label:"P UNIT",field:"unitario"},{name:"codificar",label:"Cod",field:"codificar"},{name:"total",label:"TOTAL",field:"total"}],data:[]}},created(){this.mismateriales(),this.mistiendas(),this.misdatos()},methods:{validarCompra(){this.$axios.get("valCompra/"+this.dato.nrocompra).then((t=>{t.data.length>0?this.mensaje="La compra ya existe":this.mensaje=""}))},viewRow(t){console.log(t.contenidos),this.detalle=t.contenidos,this.dialogDetalle=!0},registrar(){if(0==this.listado.length)return!1;this.dato.contenido=this.listado,this.dato.tienda_id=this.tienda.id,this.$axios.post("compra",this.dato).then((t=>{console.log(t.data),this.misdatos(),this.$q.notify({color:"green-4",icon:"check",message:"Creado correctamente"}),this.alert=!1,this.dato={},this.listado=[]}))},eliminar(t){console.log(t),this.listado.splice(t.rowIndex,1)},agregarMaterial(){if(console.log(this.listado),void 0==this.reg.cantidad||this.reg.cantidad<=0||void 0==this.reg.unitario||""==this.reg.unitario||void 0==this.reg.material.id)return console.log("error2 ing"),!1;this.reg.total=parseFloat(this.reg.cantidad)*parseFloat(this.reg.unitario),this.listado.push(this.reg),this.reg={material:{label:""}}},mismateriales(){this.$q.loading.show(),this.$axios.get("material").then((t=>{console.log(t.data),t.data.forEach((t=>{t.label=t.nombre})),this.materiales=t.data,this.$q.loading.hide(),this.material=this.materiales[0]}))},mistiendas(){this.$q.loading.show(),this.$axios.get("tienda").then((t=>{console.log(t.data),t.data.forEach((t=>{t.label=t.nombre})),this.tiendas=t.data,this.$q.loading.hide(),this.tienda={label:""}}))},misdatos(){this.$q.loading.show(),this.$axios.get("compra").then((t=>{console.log(t.data),this.compras=t.data,this.$q.loading.hide()}))},editRow(t){this.dato2=t.row,this.dialog_mod=!0},deleteRow(t){this.dato2=t.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("material",this.dato).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={},this.alert=!1,this.misdatos()})).catch((t=>{console.log(t.response.data),this.$q.notify({message:t.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onDel(){this.$q.loading.show(),this.$axios.delete("material/"+this.dato2.id).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato={}}}},so=io,no=Object(f["a"])(so,eo,ao,!1,null,null,null),lo=no.exports;at()(no,"components",{QBtn:Y["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QIcon:Z["a"],QForm:K["a"],QInput:H["a"],QSelect:tt["a"],QTable:V["a"],QTd:G["a"],QAvatar:ze["a"],QCardActions:ut["a"]}),at()(no,"directives",{ClosePopup:pt["a"]});var ro=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-btn",{staticClass:"q-mb-xs",attrs:{label:"Registrar Tienda",color:"positive",icon:"add_circle"},on:{click:function(e){t.alert=!0}}}),e("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"70%"}},[e("q-card-section",{staticClass:"bg-green-14 text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"add_circle"}}),t._v(" REGISTRO TIENDA PROVEEDOR")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[e("q-input",{attrs:{outlined:"",type:"text",label:"Nombre","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato.nombre,callback:function(e){t.$set(t.dato,"nombre",e)},expression:"dato.nombre"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Representante"},model:{value:t.dato.representante,callback:function(e){t.$set(t.dato,"representante",e)},expression:"dato.representante"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Direccion"},model:{value:t.dato.direccion,callback:function(e){t.$set(t.dato,"direccion",e)},expression:"dato.direccion"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Telefono"},model:{value:t.dato.telefono,callback:function(e){t.$set(t.dato,"telefono",e)},expression:"dato.telefono"}}),e("div",[e("q-btn",{attrs:{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-table",{attrs:{filter:t.filter,title:"LISTADO DE TIENDA/PROVEEDOR",data:t.data,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100]},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"yellow",icon:"edit"},on:{click:function(e){return t.editRow(a)}}}),e("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteRow(a)}}})],1)]}}])}),e("q-dialog",{model:{value:t.dialog_mod,callback:function(e){t.dialog_mod=e},expression:"dialog_mod"}},[e("q-card",{staticStyle:{"max-width":"80%",width:"50%"}},[e("q-card-section",{staticClass:"bg-warning text-white"},[e("div",{staticClass:"text-h7"},[e("q-icon",{attrs:{name:"edit"}}),t._v(" MODIFICAR TIENDA")],1)]),e("q-card-section",{staticClass:"q-pt-xs"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.onMod}},[e("q-input",{attrs:{outlined:"",type:"text",label:"Nombre ","lazy-rules":"",rules:[t=>t&&t.length>0||"Por favor ingresa datos"]},model:{value:t.dato2.nombre,callback:function(e){t.$set(t.dato2,"nombre",e)},expression:"dato2.nombre"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Representante "},model:{value:t.dato2.representante,callback:function(e){t.$set(t.dato2,"representante",e)},expression:"dato2.representante"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Direccion"},model:{value:t.dato2.direccion,callback:function(e){t.$set(t.dato2,"direccion",e)},expression:"dato2.direccion"}}),e("q-input",{attrs:{outlined:"",type:"text",label:"Telefono"},model:{value:t.dato2.telefono,callback:function(e){t.$set(t.dato2,"telefono",e)},expression:"dato2.telefono"}}),e("div",[e("q-btn",{attrs:{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",icon:"delete",color:"negative"}})],1)],1)],1)],1)],1),e("q-dialog",{model:{value:t.dialog_del,callback:function(e){t.dialog_del=e},expression:"dialog_del"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"clear",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("Seguro de eliminar Registro.")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Eliminar",color:"deep-orange"},on:{click:t.onDel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},co=[];const{addToDate:uo}=P["a"];var po={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{},model:"",dato2:{},options:[],props:[],modelpermiso:!1,uni:{},columns:[{name:"nombre",align:"left",label:"NOMBRE",field:"nombre",sortable:!0},{name:"representante",align:"left",label:"REPRESENTANTE ",field:"representante",sortable:!0},{name:"direccion",align:"left",label:"DIRECCION",field:"direccion",sortable:!0},{name:"telefono",align:"left",label:"TELEFONO",field:"telefono",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"opcion",sortable:!1}],data:[]}},created(){this.misdatos()},methods:{misdatos(){this.$q.loading.show(),this.$axios.get("tienda").then((t=>{console.log(t.data),this.data=t.data,this.$q.loading.hide()}))},editRow(t){this.dato2=t.row,this.dialog_mod=!0},deleteRow(t){this.dato2=t.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("tienda",this.dato).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={},this.alert=!1,this.misdatos()})).catch((t=>{console.log(t.response.data),this.$q.notify({message:t.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("tienda/"+this.dato2.id,this.dato2).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("tienda/"+this.dato2.id).then((t=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({message:t.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato={}}}},mo=po,ho=Object(f["a"])(mo,ro,co,!1,null,null,null),bo=ho.exports;at()(ho,"components",{QBtn:Y["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QIcon:Z["a"],QForm:K["a"],QInput:H["a"],QTable:V["a"],QTd:G["a"],QAvatar:ze["a"],QCardActions:ut["a"]}),at()(ho,"directives",{ClosePopup:pt["a"]});var go=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[e("div",{staticClass:"text-h5 text-center"},[t._v("SALIDA DE MATERIAL")]),e("div",[e("q-btn",{attrs:{color:"green",icon:"check",label:"Registro"},on:{click:function(e){t.salida={},t.dialogReg=!0}}})],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4 q-pa-xs"},[e("q-input",{attrs:{dense:"",type:"date",label:"Fecha",outlined:""},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}})],1),e("div",{staticClass:"col-4"},[e("q-btn",{attrs:{color:"green",icon:"search",label:"Buscar"},on:{click:t.generarList}})],1)]),e("div",{staticClass:"col-12"},[e("q-table",{attrs:{title:"DATOS DE SALIDA",data:t.salidas,columns:t.colsalida,"row-key":"name"},scopedSlots:t._u([{key:"body-cell-elementos",fn:function(a){return[e("q-td",{key:"elementos",attrs:{props:a}},t._l(a.row.elementos,(function(a){return e("div",{key:a.id},[t._v("\n                "+t._s(a.cantidad)+" "+t._s(a.material)+" - "+t._s(a.inventario.num)+"\n              ")])})),0)]}},{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{color:"info",icon:"print",dense:""},on:{click:function(e){return t.printSalida(a.row)}}})],1)]}}])})],1),e("q-dialog",{attrs:{"full-width":""},model:{value:t.dialogReg,callback:function(e){t.dialogReg=e},expression:"dialogReg"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"shopping_cart",color:"primary","text-color":"white",dense:"",size:"40px"}}),e("span",{staticClass:"q-ml-sm"},[t._v("REGISTRO SALIDA DE MATERIAL")])],1),e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 col-xs-12"},[e("q-select",{attrs:{options:t.tecnicos,label:"Tecnicos",outlined:"",dense:""},model:{value:t.tecnico,callback:function(e){t.tecnico=e},expression:"tecnico"}})],1),e("div",{staticClass:"col-md-6 col-xs-12"},[e("q-input",{attrs:{type:"text",label:"Destino",outlined:"",dense:""},model:{value:t.salida.destino,callback:function(e){t.$set(t.salida,"destino",e)},expression:"salida.destino"}})],1),e("div",{staticClass:"col-md-6 col-xs-12"},[e("q-input",{attrs:{type:"text",label:"Motivo",outlined:"",dense:""},model:{value:t.salida.motivo,callback:function(e){t.$set(t.salida,"motivo",e)},expression:"salida.motivo"}})],1),e("div",{staticClass:"col-md-6 col-xs-12"},[e("q-select",{attrs:{options:t.carros,label:"Carro",outlined:"",dense:""},model:{value:t.salida.carro,callback:function(e){t.$set(t.salida,"carro",e)},expression:"salida.carro"}})],1),e("div",{staticClass:"col-12"},[e("q-form",{on:{submit:function(e){return e.preventDefault(),t.regList.apply(null,arguments)}}},[e("q-input",{attrs:{outlined:"",type:"text",label:"Codigo Material",dense:"",autofocus:""},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1)],1)]),e("div",{staticClass:"col-12"},[e("q-table",{attrs:{title:"Detalle",data:t.detalle,columns:t.columna,"row-key":"name",dense:""},scopedSlots:t._u([{key:"body-cell-opcion",fn:function(a){return[e("q-td",{key:"opcion",attrs:{props:a}},[e("q-btn",{attrs:{color:"red",icon:"delete",dense:""},on:{click:function(e){return t.quitarLista(a)}}})],1)]}},{key:"body-cell-material",fn:function(a){return[e("q-td",{key:"material",attrs:{props:a}},[t._v("\n              "+t._s(a.row.material.nombre)+"\n            ")])]}}])})],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",color:"red",icon:"cancel",label:"CANCELAR"}})],1),e("div",{staticClass:"col-4"},[e("q-btn",{attrs:{dense:"",color:"green",icon:"check",label:"REGISTRAR"},on:{click:t.registroSalida}})],1)])])],1)],1),e("div",{staticClass:"hidden",attrs:{id:"myelement"}})],1)},fo=[],vo=(a("9490"),{data(){return{salida:{},fecha:P["a"].formatDate(new Date,"YYYY-MM-DD"),salidas:[],tecnico:{},tecnicos:[],detalle:[],columna:[{name:"cant",label:"Cantidad",field:"cant"},{name:"codigo",label:"codigo",field:"codigo"},{name:"material",label:"material",field:"material"},{name:"opcion",label:"opcion",field:"opcion"}],colsalida:[{name:"tecnico",label:"TECNICO",field:t=>t.tecnico.name},{name:"carro",label:"CARRO",field:"carro"},{name:"destino",label:"DESTINO",field:"destino"},{name:"motivo",label:"MOTIVO",field:"motivo"},{name:"elementos",label:"MATERIALES",field:"elementos"},{name:"opcion",label:"OPCION",field:"opcion"}],codigo:"",carros:["","CARRO VALDE 1","CARRO VALDE 2","CARRO VALDE 3","CARRO VALDE AZUL","CAMIONETA ROJA","CAMIONETA BLANCA"],dialogReg:!1}},created(){this.cargarTecnicos(),this.generarList()},methods:{generarList(){if(void 0==this.fecha||""==this.fecha)return!1;this.$axios.post("listsalida",{fecha:this.fecha}).then((t=>{this.salidas=t.data}))},registroSalida(){if(0==this.detalle.length)return this.$q.notify({color:"red-4",icon:"info",message:"DEBE REGISTRAR MATERIAL"}),!1;this.salida.user_id=this.$store.state.login.user.id,this.salida.tecnico=this.tecnico.id,this.salida.detalle=this.detalle,this.$axios.post("salida",this.salida).then((t=>{console.log(t.data),this.salida={},this.tecnico=this.tecnicos[0],this.detalle=[],this.dialogReg=!1}))},quitarLista(t){console.log(t),this.detalle.splice(t.rowIndex,1)},cargarTecnicos(){this.$axios.get("listUser").then((t=>{t.data.forEach((t=>{t.label=t.name})),this.tecnicos=t.data,this.tecnico=this.tecnicos[0]}))},printSalida(t){let e="<style>      table{        width:100%;      }      .titulo{      text-align:center;      font-weight:bold;      }      </style>      <div id='myelement'>      <div class='titulo'>SALIDA DE ALMACEN</div>      <div><b>TECNICO: </b>"+t.tecnico.name+"</div>      <div><b>CARRO: </b>"+t.carro+"</div>      <div><b>DESTINO: </b>"+t.destino+"</div>      <div><b>MOTIVO: </b>"+t.motivo+"</div>      <div class='titulo'><b>DETALLE </b></div>      <table><tr><th>CANTIDAD</th><th>MATERIAL</th><th>CODIGO</th></tr>";t.elementos.forEach((t=>{e+="<tr><td>"+t.cantidad+"</td><td>"+t.material+"</td><td>"+t.inventario.codigo+"</td></tr>"})),e+="</table></div>\n      ",document.getElementById("myelement").innerHTML=e;const a=new z["Printd"];a.print(document.getElementById("myelement"))},regList(){this.$axios.get("consultaInv/"+this.codigo).then((t=>{if(console.log(t.data),""!=t.data){let e=this.detalle.find((t=>t.codigo===this.codigo));console.log(e),void 0==e?(t.data.cant=1,this.detalle.push(t.data)):(e.cant>=t.data.cantidad||(e.cant+=1),console.log(e)),console.log(this.detalle)}this.codigo=""}))}}}),qo=vo,Co=Object(f["a"])(qo,go,fo,!1,null,null,null),xo=Co.exports;at()(Co,"components",{QPage:j["a"],QBtn:Y["a"],QInput:H["a"],QTable:V["a"],QTd:G["a"],QDialog:W["a"],QCard:X["a"],QCardSection:J["a"],QAvatar:ze["a"],QSelect:tt["a"],QForm:K["a"]}),at()(Co,"directives",{ClosePopup:pt["a"]});var yo=a("bc13");const _o=[{path:"/",component:()=>Promise.all([a.e(0),a.e(2)]).then(a.bind(null,"713b")),children:[{path:"",component:()=>a.e(4).then(a.bind(null,"8b24")),meta:{requiresAuth:!0}},{path:"mantenimiento",component:it,meta:{requiresAuth:!0}},{path:"denuncia",component:ht,meta:{requiresAuth:!0}},{path:"mapa",component:Rt,meta:{requiresAuth:!0}},{path:"reportedenuncia",component:zt,meta:{requiresAuth:!0}},{path:"alumbrado",component:Vt,meta:{requiresAuth:!0}},{path:"reclamos/:cedula",component:$e,meta:{requiresAuth:!0}},{path:"reclamos",component:$e,meta:{requiresAuth:!0}},{path:"usuarios",component:Fe,meta:{requiresAuth:!0}},{path:"tecnicos",component:Ze,meta:{requiresAuth:!0}},{path:"apublico",component:ea,meta:{requiresAuth:!0}},{path:"reportereclamo",component:ra,meta:{requiresAuth:!0}},{path:"inspeccion",component:ha,meta:{requiresAuth:!0}},{path:"cronograma",component:wa,meta:{requiresAuth:!0}},{path:"juntavecinal",component:$a,meta:{requiresAuth:!0}},{path:"materiales",component:Pa,meta:{requiresAuth:!0}},{path:"compras",component:lo,meta:{requiresAuth:!0}},{path:"tiendas",component:bo,meta:{requiresAuth:!0}},{path:"inventarios",component:Ha,meta:{requiresAuth:!0}},{path:"materialinfo",component:to,meta:{requiresAuth:!0}},{path:"salidas",component:xo,meta:{requiresAuth:!0}},{path:"home",component:yo["default"],meta:{requiresAuth:!0}},{path:"informacion",component:Jt},{path:"login",component:wt}]},{path:"/reclamoalumbrado",component:pe},{path:"/registroreclamo",component:we},{path:"/consulta/:cedula",component:ve},{path:"/consulta",component:ve},{path:"*",component:()=>a.e(3).then(a.bind(null,"e51e"))}];var ko=_o;n["a"].use(M["a"]);var wo=function(){const t=new M["a"]({scrollBehavior:()=>({x:0,y:0}),routes:ko,mode:"hash",base:""});return t.beforeEach(((t,e,a)=>{if(t.matched.some((t=>t.meta.requiresAuth))){if(N().getters["login/isLoggedIn"])return void a();a("/login")}else a()})),t},Oo=async function(){const t="function"===typeof N?await N({Vue:n["a"]}):N,e="function"===typeof wo?await wo({Vue:n["a"],store:t}):wo;t.$router=e;const a={router:e,store:t,render:t=>t(q),el:"#q-app"};return{app:a,store:t,router:e}},Ao=a("92de"),Do=a("b9ee"),Eo=a("2699"),Io=a("a40a"),Ro=a("4e2b"),$o=a("fbba"),So=a("2253"),To=a("f60f"),No=(a("6cc5"),a("e11e")),Mo=a.n(No);n["a"].use(Do["a"],{load:{key:"AIzaSyDtDisHrUQNc_iS4YcvBS5onSB3f0fcoHs",libraries:"places",v:"3.26",customCallback:"MyCustomCallback"},autoBindAllEvents:!1,installComponents:!0,dynamicLoad:!1}),n["a"].use(Ao,{load:{key:"AIzaSyBXoCUdCBDilSwYQ8ryGAJQagi49o4Fpn0",libraries:"places"},installComponents:!0}),delete Mo.a.Icon.Default.prototype._getIconUrl,Mo.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),n["a"].component("l-map",Eo["a"]),n["a"].component("l-tile-layer",Io["a"]),n["a"].component("l-marker",Ro["a"]),n["a"].component("l-icon",$o["a"]),n["a"].component("l-control",So["a"]),n["a"].component("l-popup",To["a"]),n["a"].prototype.$axios=I.a,n["a"].prototype.$axios.defaults.baseURL="https://electricab.gamo.cf/api/";const Lo="";async function Qo(){const{app:t,store:e,router:a}=await Oo();let o=!1;const i=t=>{o=!0;const e=Object(t)===t?a.resolve(t).route.fullPath:t;window.location.href=e},s=window.location.href.replace(window.location.origin,""),l=[void 0];for(let c=0;!1===o&&c<l.length;c++)if("function"===typeof l[c])try{await l[c]({app:t,router:a,store:e,Vue:n["a"],ssrContext:null,redirect:i,urlPath:s,publicPath:Lo})}catch(r){return r&&r.url?void(window.location.href=r.url):void console.error("[Quasar] boot error:",r)}!0!==o&&new n["a"](t)}Qo()},"31cd":function(t,e,a){},"8d82":function(t,e,a){"use strict";a("965a")},"8ff1":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("q-page",{attrs:{padding:""}},[e("div",[e("q-img",{staticStyle:{display:"block","margin-left":"auto","margin-right":"auto",width:"40%",height:"40%"},attrs:{src:"logoalumbrado.jpeg"}})],1)])},i=[]},"965a":function(t,e,a){},a3c0:function(t,e){},bc13:function(t,e,a){"use strict";var o=a("8ff1"),i=a("edfd"),s=a("2877"),n=a("9989"),l=a("068f"),r=a("eebe"),c=a.n(r),d=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=d.exports,c()(d,"components",{QPage:n["a"],QImg:l["a"]})},edfd:function(t,e,a){"use strict";var o=a("a3c0"),i=a.n(o);e["default"]=i.a}});